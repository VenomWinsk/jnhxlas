(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226384"],{e872:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-list"},[a("div",{staticClass:"tableTopTools clearfix"},[a("p",{staticClass:"toolName fl"},[t._v("工具栏：")]),a("div",{staticClass:"buttons fl"},[a("a-button",{attrs:{type:"primary"},on:{click:t.optProject}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 添加项目 ")],1)],1),a("div",{staticClass:"searchInput fr"},[a("a-input-search",{attrs:{placeholder:"请输入项目名称"},on:{change:t.keywordChange},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1)]),a("div",{staticClass:"tableContent"},[a("a-table",{attrs:{columns:t.columns,dataSource:t.projectData,rowKey:"id",pagination:!1,loading:t.isLoading},scopedSlots:t._u([{key:"step",fn:function(e,n){return a("span",{},[1===n.step?a("a-tag",{attrs:{color:"blue"}},[t._v("配置阶段")]):a("a-tag",{attrs:{color:"blue"}},[t._v("入库阶段")])],1)}},{key:"unitId",fn:function(e,n){return a("span",{},[a("span",[t._v(t._s(t._f("getUnitCnById")(n.unitId,t.that)))])])}},{key:"gmtCreate",fn:function(e,n){return a("span",{},[a("span",[t._v(t._s(t._f("dateFormatter")(n.gmtCreate,1)))])])}},{key:"startTime",fn:function(e,n){return a("span",{},[a("span",[t._v(t._s(t._f("dateFormatter")(n.startTime,1)))])])}},{key:"endTime",fn:function(e,n){return a("span",{},[a("span",[t._v(t._s(t._f("dateFormatter")(n.endTime,1)))])])}},{key:"action",fn:function(e,n){return a("span",{},[a("a",{staticClass:"t-optColor-success",on:{click:function(e){return t.continueProject(n)}}},[t._v("详情")])])}}])}),t.projectData.length>0?a("div",{staticClass:"ar",staticStyle:{"margin-top":"30px"}},[a("a-pagination",{attrs:{total:t.total,"page-size":t.pageParam.size,"show-total":function(t){return"共"+t+"条"}},on:{change:t.pageChange},model:{value:t.pageParam.page,callback:function(e){t.$set(t.pageParam,"page",e)},expression:"pageParam.page"}})],1):t._e()],1)])},s=[],o=(a("d81d"),a("5530")),i=a("c1df"),r=a.n(i),c={name:"project-list",data:function(){return{columns:[{dataIndex:"name",title:"项目名称"},{dataIndex:"description",title:"描述"},{dataIndex:"unitId",title:"单位",scopedSlots:{customRender:"unitId"}},{dataIndex:"startTime",title:"开始时间",scopedSlots:{customRender:"startTime"}},{dataIndex:"endTime",title:"结束时间",scopedSlots:{customRender:"endTime"}},{dataIndex:"creator",title:"创建者"},{dataIndex:"gmtCreate",title:"创建时间"},{dataIndex:"action",title:"操作",scopedSlots:{customRender:"action"}}],projectData:[],searchInput:"",pageParam:{page:1,size:10},total:0,that:this,isLoading:!1}},created:function(){this.getProject()},methods:{pageChange:function(){this.getProject()},getProject:function(){var t=this;this.isLoading=!1;var e=Object.assign({},this.pageParam,{name:this.searchInput});this.$API.searchProject(e).then((function(e){1e3===e.code?(t.projectData=e.data.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{gmtCreate:new r.a(t.gmtCreate).format("YYYY-MM-DD HH:mm:ss"),gmtModified:new r.a(t.gmtModified).format("YYYY-MM-DD HH:mm:ss")})})),t.total=e.total,t.pageParam.page>1&&0===t.unitData.length&&(t.pageParam.size--,t.getProject())):(t.projectData=[],t.total=0)}))},optProject:function(){this.$router.push({name:"project-opt",query:{step:0}})},continueProject:function(t){this.$router.push({name:"project-opt",query:{step:"1",pid:t.id}})},pauseClick:function(t,e){var a=this;t.status=-2===e?-2:10,this.$API.editProject({id:t.id,status:t.status}).then((function(t){1e3===t.code?(console.log("----------"),-2===e?a.$message.success("执行任务已暂停"):a.$message.success("项目正在继续")):-2===e?a.$message.warning("暂停项目失败"):a.$message.warning("继续执行任务失败")}))},deleteProject:function(t){var e=this.$createElement,a=this;console.log(t),this.$confirm({title:"确定删除该条数据吗？",content:function(){return e("div",{style:"color:red"},[" 删除后将不可恢复 "])},okText:"确认删除",cancelText:"取消删除",onOk:function(){var e=this;a.$message.info("正在删除..."),a.$API.delProject(t.id).then((function(t){1e3===t.code?(a.$message.success("删除成功"),a.getProject()):(e.isLoading=!1,a.$message.warning(t.message))}))}})},keywordChange:function(){this.pageParam.page=1,this.getProject()}}},u=c,d=a("2877"),l=Object(d["a"])(u,n,s,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d226384.988ca4b6.js.map