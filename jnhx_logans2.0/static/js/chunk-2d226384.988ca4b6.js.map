{"version":3,"sources":["webpack:///./src/views/business/collect/project/project-list.vue?9943","webpack:///src/views/business/collect/project/project-list.vue","webpack:///./src/views/business/collect/project/project-list.vue?c80a","webpack:///./src/views/business/collect/project/project-list.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","on","optProject","keywordChange","model","value","callback","$$v","searchInput","expression","columns","projectData","isLoading","scopedSlots","_u","key","fn","text","record","step","_s","_f","unitId","that","gmtCreate","startTime","endTime","$event","continueProject","length","staticStyle","total","pageParam","size","pageChange","$set","_e","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,IAAI,CAACE,YAAY,eAAe,CAACN,EAAIO,GAAG,UAAUH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQT,EAAIU,aAAa,CAACN,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,UAAUR,EAAIO,GAAG,WAAW,IAAI,GAAGH,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,iBAAiB,CAACI,MAAM,CAAC,YAAc,WAAWC,GAAG,CAAC,OAAST,EAAIW,eAAeC,MAAM,CAACC,MAAOb,EAAe,YAAEc,SAAS,SAAUC,GAAMf,EAAIgB,YAAYD,GAAKE,WAAW,kBAAkB,KAAKb,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,UAAU,CAACI,MAAM,CAAC,QAAUR,EAAIkB,QAAQ,WAAalB,EAAImB,YAAY,OAAS,KAAK,YAAa,EAAM,QAAUnB,EAAIoB,WAAWC,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,SAASC,EAAKC,GAAQ,OAAOtB,EAAG,OAAO,GAAG,CAAkB,IAAhBsB,EAAOC,KAAYvB,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACR,EAAIO,GAAG,UAAUH,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACR,EAAIO,GAAG,WAAW,KAAK,CAACgB,IAAI,SAASC,GAAG,SAASC,EAAKC,GAAQ,OAAOtB,EAAG,OAAO,GAAG,CAACA,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAI4B,GAAG5B,EAAI6B,GAAG,gBAAP7B,CAAwB0B,EAAOI,OAAO9B,EAAI+B,cAAc,CAACR,IAAI,YAAYC,GAAG,SAASC,EAAKC,GAAQ,OAAOtB,EAAG,OAAO,GAAG,CAACA,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAI4B,GAAG5B,EAAI6B,GAAG,gBAAP7B,CAAwB0B,EAAOM,UAAU,WAAW,CAACT,IAAI,YAAYC,GAAG,SAASC,EAAKC,GAAQ,OAAOtB,EAAG,OAAO,GAAG,CAACA,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAI4B,GAAG5B,EAAI6B,GAAG,gBAAP7B,CAAwB0B,EAAOO,UAAU,WAAW,CAACV,IAAI,UAAUC,GAAG,SAASC,EAAKC,GAAQ,OAAOtB,EAAG,OAAO,GAAG,CAACA,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAI4B,GAAG5B,EAAI6B,GAAG,gBAAP7B,CAAwB0B,EAAOQ,QAAQ,WAAW,CAACX,IAAI,SAASC,GAAG,SAASC,EAAKC,GAAQ,OAAOtB,EAAG,OAAO,GAAG,CAACA,EAAG,IAAI,CAACE,YAAY,qBAAqBG,GAAG,CAAC,MAAQ,SAAS0B,GAAQ,OAAOnC,EAAIoC,gBAAgBV,MAAW,CAAC1B,EAAIO,GAAG,gBAAiBP,EAAImB,YAAYkB,OAAS,EAAGjC,EAAG,MAAM,CAACE,YAAY,KAAKgC,YAAY,CAAC,aAAa,SAAS,CAAClC,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQR,EAAIuC,MAAM,YAAYvC,EAAIwC,UAAUC,KAAK,aAAa,SAAUF,GAAS,MAAQ,IAAMA,EAAQ,MAAS9B,GAAG,CAAC,OAAST,EAAI0C,YAAY9B,MAAM,CAACC,MAAOb,EAAIwC,UAAc,KAAE1B,SAAS,SAAUC,GAAMf,EAAI2C,KAAK3C,EAAIwC,UAAW,OAAQzB,IAAME,WAAW,qBAAqB,GAAGjB,EAAI4C,MAAM,MAC1nEC,EAAkB,G,6CCuDtB,GACE,KAAF,eACE,KAFF,WAGI,MAAJ,CACM,QAAN,CACA,CACQ,UAAR,OACQ,MAAR,QAEA,CACQ,UAAR,cACQ,MAAR,MAEA,CACQ,UAAR,SACQ,MAAR,KACQ,YAAR,CAAU,aAAV,WAEA,CACQ,UAAR,YACQ,MAAR,OACQ,YAAR,CAAU,aAAV,cAEA,CACQ,UAAR,UACQ,MAAR,OACQ,YAAR,CAAU,aAAV,YAWM,CACE,UAAR,UACQ,MAAR,OAEA,CACQ,UAAR,YACQ,MAAR,QAEA,CACQ,UAAR,SACQ,MAAR,KACQ,YAAR,CAAU,aAAV,YAGM,YAAN,GACM,YAAN,GACM,UAAN,CACQ,KAAR,EACQ,KAAR,IAEM,MAAN,EACM,KAAN,KACM,WAAN,IAGE,QA9DF,WA+DI,KAAJ,cAEE,QAAF,CACI,WADJ,WAEM,KAAN,cAEI,WAJJ,WAIM,IAAN,OACM,KAAN,aACM,IAAN,mCACQ,KAAR,mBAEM,KAAN,wCACA,cAEU,EAAV,oCAAY,OAAZ,iCACA,GADA,IAEc,UAAd,mDACc,YAAd,0DAEU,EAAV,cACA,4CACY,EAAZ,iBACY,EAAZ,gBAGU,EAAV,eACU,EAAV,aAII,WA5BJ,WA6BM,KAAN,cAAQ,KAAR,cAAQ,MAAR,CAAU,KAAV,MAGI,gBAhCJ,SAgCA,GACM,KAAN,cAAQ,KAAR,cAAQ,MAAR,CAAU,KAAV,IAAU,IAAV,SAGI,WApCJ,SAoCA,KAAM,IAAN,OAEQ,EAAR,QADA,OACA,EAEA,GAEM,KAAN,kBAAQ,GAAR,KAAQ,OAAR,6BACA,cACU,QAAV,mBACA,MACY,EAAZ,4BAEY,EAAZ,6BAGA,MACY,EAAZ,2BAEY,EAAZ,iCAMI,cA5DJ,SA4DA,GAAM,IAAN,sBACA,OACM,QAAN,OACM,KAAN,UACQ,MAAR,aACQ,QAAR,WAAU,OAAV,SAAY,MACZ,aADA,iBAEQ,OAAR,OACQ,WAER,OACQ,KARR,WASU,IAAV,OACU,EAAV,yBACU,EAAV,wCACA,cACc,EAAd,yBACc,EAAd,eAEc,EAAd,aACc,EAAd,oCASI,cAzFJ,WA0FM,KAAN,iBACM,KAAN,gBCpNmY,I,YCO/XC,EAAY,eACd,EACA/C,EACA8C,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-2d226384.988ca4b6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"project-list\"},[_c('div',{staticClass:\"tableTopTools clearfix\"},[_c('p',{staticClass:\"toolName fl\"},[_vm._v(\"工具栏：\")]),_c('div',{staticClass:\"buttons fl\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.optProject}},[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\" 添加项目 \")],1)],1),_c('div',{staticClass:\"searchInput fr\"},[_c('a-input-search',{attrs:{\"placeholder\":\"请输入项目名称\"},on:{\"change\":_vm.keywordChange},model:{value:(_vm.searchInput),callback:function ($$v) {_vm.searchInput=$$v},expression:\"searchInput\"}})],1)]),_c('div',{staticClass:\"tableContent\"},[_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.projectData,\"rowKey\":\"id\",\"pagination\":false,\"loading\":_vm.isLoading},scopedSlots:_vm._u([{key:\"step\",fn:function(text,record){return _c('span',{},[(record.step === 1)?_c('a-tag',{attrs:{\"color\":\"blue\"}},[_vm._v(\"配置阶段\")]):_c('a-tag',{attrs:{\"color\":\"blue\"}},[_vm._v(\"入库阶段\")])],1)}},{key:\"unitId\",fn:function(text,record){return _c('span',{},[_c('span',[_vm._v(_vm._s(_vm._f(\"getUnitCnById\")(record.unitId,_vm.that)))])])}},{key:\"gmtCreate\",fn:function(text,record){return _c('span',{},[_c('span',[_vm._v(_vm._s(_vm._f(\"dateFormatter\")(record.gmtCreate,1)))])])}},{key:\"startTime\",fn:function(text,record){return _c('span',{},[_c('span',[_vm._v(_vm._s(_vm._f(\"dateFormatter\")(record.startTime,1)))])])}},{key:\"endTime\",fn:function(text,record){return _c('span',{},[_c('span',[_vm._v(_vm._s(_vm._f(\"dateFormatter\")(record.endTime,1)))])])}},{key:\"action\",fn:function(text,record){return _c('span',{},[_c('a',{staticClass:\"t-optColor-success\",on:{\"click\":function($event){return _vm.continueProject(record)}}},[_vm._v(\"详情\")])])}}])}),(_vm.projectData.length > 0)?_c('div',{staticClass:\"ar\",staticStyle:{\"margin-top\":\"30px\"}},[_c('a-pagination',{attrs:{\"total\":_vm.total,\"page-size\":_vm.pageParam.size,\"show-total\":function (total) { return (\"共\" + total + \"条\"); }},on:{\"change\":_vm.pageChange},model:{value:(_vm.pageParam.page),callback:function ($$v) {_vm.$set(_vm.pageParam, \"page\", $$v)},expression:\"pageParam.page\"}})],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"project-list\">\r\n        <div class=\"tableTopTools clearfix\">\r\n            <p class=\"toolName fl\">工具栏：</p>\r\n            <div class=\"buttons fl\">\r\n                <a-button type=\"primary\" @click=\"optProject\">\r\n                    <a-icon type=\"plus\"></a-icon>\r\n                    添加项目\r\n                </a-button>\r\n            </div>\r\n            <div class=\"searchInput fr\">\r\n                <a-input-search v-model=\"searchInput\" placeholder=\"请输入项目名称\" @change=\"keywordChange\"></a-input-search>\r\n            </div>\r\n        </div>\r\n        <div class=\"tableContent\">\r\n            <a-table :columns=\"columns\" :dataSource=\"projectData\" rowKey=\"id\" :pagination=\"false\" :loading=\"isLoading\"\r\n            >\r\n        <span slot=\"step\" slot-scope=\"text,record\">\r\n          <a-tag color=\"blue\" v-if=\"record.step === 1\">配置阶段</a-tag>\r\n          <a-tag color=\"blue\" v-else>入库阶段</a-tag>\r\n        </span>\r\n                <span slot=\"unitId\" slot-scope=\"text,record\">\r\n          <span>{{record.unitId | getUnitCnById(that)}}</span>\r\n        </span>\r\n                <span slot=\"gmtCreate\" slot-scope=\"text,record\">\r\n           <span>{{record.gmtCreate | dateFormatter(1)}}</span>\r\n        </span>\r\n                <span slot=\"startTime\" slot-scope=\"text,record\">\r\n         <span>{{record.startTime | dateFormatter(1)}}</span>\r\n        </span>\r\n                <span slot=\"endTime\" slot-scope=\"text,record\">\r\n          <span>{{record.endTime | dateFormatter(1)}}</span>\r\n         </span>\r\n         <span slot=\"action\" slot-scope=\"text,record\">\r\n          <!--<a class=\"t-optColor-normal\" @click=\"continueProject(record)\">继续</a>-->\r\n          <a class=\"t-optColor-success\" @click=\"continueProject(record)\">详情</a>\r\n          <!--<a class=\"t-optColor-normal\" @click=\"pauseClick(record,-2)\">暂停</a>\r\n          <a class=\"t-optColor-normal\" @click=\"pauseClick(record,10)\">继续</a>\r\n          <a class=\"t-optColor-warning\" @click=\"deleteProject(record)\">删除</a>-->\r\n        </span>\r\n            </a-table>\r\n            <div class=\"ar\" style=\"margin-top:30px\" v-if=\"projectData.length > 0\">\r\n                <a-pagination\r\n                        v-model=\"pageParam.page\"\r\n                        :total=\"total\"\r\n                        :page-size=\"pageParam.size\"\r\n                        @change=\"pageChange\"\r\n                        :show-total=\"total => `共${total}条`\"\r\n                ></a-pagination>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import moment from 'moment'\r\n\r\n    export default {\r\n        name: \"project-list\",\r\n        data() {\r\n            return {\r\n                columns: [\r\n                    {\r\n                        dataIndex: \"name\",\r\n                        title: \"项目名称\",\r\n                    },\r\n                    {\r\n                        dataIndex: \"description\",\r\n                        title: \"描述\",\r\n                    },\r\n                    {\r\n                        dataIndex: \"unitId\",\r\n                        title: \"单位\",\r\n                        scopedSlots: {customRender: \"unitId\"},\r\n                    },\r\n                    {\r\n                        dataIndex: \"startTime\",\r\n                        title: \"开始时间\",\r\n                        scopedSlots: {customRender: 'startTime'}\r\n                    },\r\n                    {\r\n                        dataIndex: 'endTime',\r\n                        title: \"结束时间\",\r\n                        scopedSlots: {customRender: 'endTime'}\r\n                    },\r\n                   /* {\r\n                        dataIndex: \"clues\",\r\n                        title: \"优先筛选内容\",\r\n                    },*/\r\n                    /*{\r\n                        dataIndex: \"step\",\r\n                        title: \"步骤阶段\",\r\n                        scopedSlots: {customRender: \"step\"},\r\n                    },*/\r\n                    {\r\n                        dataIndex: \"creator\",\r\n                        title: \"创建者\",\r\n                    },\r\n                    {\r\n                        dataIndex: \"gmtCreate\",\r\n                        title: \"创建时间\",\r\n                    },\r\n                    {\r\n                        dataIndex: \"action\",\r\n                        title: \"操作\",\r\n                        scopedSlots: {customRender: \"action\"},\r\n                    },\r\n                ],\r\n                projectData: [],\r\n                searchInput: \"\",\r\n                pageParam: {\r\n                    page: 1,\r\n                    size: 10,\r\n                },\r\n                total: 0,\r\n                that: this,\r\n                isLoading: false,\r\n            };\r\n        },\r\n        created() {\r\n            this.getProject();\r\n        },\r\n        methods: {\r\n            pageChange() {\r\n                this.getProject();\r\n            },\r\n            getProject() {\r\n                this.isLoading = false;\r\n                let params = Object.assign({}, this.pageParam, {\r\n                    name: this.searchInput,\r\n                });\r\n                this.$API.searchProject(params).then((res) => {\r\n                    if (res.code === 1000) {\r\n                        // this.projectData = res.data;\r\n                        this.projectData = res.data.map(item => ({\r\n                            ...item,\r\n                            gmtCreate: new moment(item.gmtCreate).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n                            gmtModified: new moment(item.gmtModified).format(\"YYYY-MM-DD HH:mm:ss\")\r\n                        }));\r\n                        this.total = res.total;\r\n                        if (this.pageParam.page > 1 && this.unitData.length === 0) {\r\n                            this.pageParam.size--;\r\n                            this.getProject();\r\n                        }\r\n                    } else {\r\n                        this.projectData = [];\r\n                        this.total = 0;\r\n                    }\r\n                });\r\n            },\r\n            optProject() {\r\n                this.$router.push({name: \"project-opt\", query: {step: 0}});\r\n            },\r\n            // 详情\r\n            continueProject(column) {\r\n                this.$router.push({name: \"project-opt\", query: {step: '1', pid: column.id}});\r\n            },\r\n            // 暂停\r\n            pauseClick(column, flag) {\r\n                if (flag === -2) {\r\n                    column.status = -2;\r\n                } else {\r\n                    column.status = 10;\r\n                }\r\n                this.$API.editProject({id: column.id, status: column.status}).then((res) => {\r\n                    if (res.code === 1000){\r\n                        console.log(\"----------\");\r\n                        if (flag === -2) {\r\n                            this.$message.success(\"执行任务已暂停\");\r\n                        } else {\r\n                            this.$message.success(\"项目正在继续\");\r\n                        }\r\n                    } else {\r\n                        if (flag === -2) {\r\n                            this.$message.warning(\"暂停项目失败\");\r\n                        } else {\r\n                            this.$message.warning(\"继续执行任务失败\");\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            // 删除\r\n            deleteProject(column) {\r\n                const that = this;\r\n                console.log(column);\r\n                this.$confirm({\r\n                    title: \"确定删除该条数据吗？\",\r\n                    content: () => < div\r\n                style = \"color:red\" > 删除后将不可恢复 < /div>,\r\n                okText: \"确认删除\",\r\n                    cancelText\r\n            :\r\n                \"取消删除\",\r\n                    onOk()\r\n                {\r\n                    that.$message.info(\"正在删除...\");\r\n                    that.$API.delProject(column.id).then((res) => {\r\n                        if (res.code === 1000) {\r\n                            that.$message.success(\"删除成功\");\r\n                            that.getProject();\r\n                        } else {\r\n                            this.isLoading = false;\r\n                            that.$message.warning(res.message);\r\n                        }\r\n                    });\r\n                }\r\n            ,\r\n            })\r\n                ;\r\n            },\r\n            // 搜索关键词变化事件\r\n            keywordChange() {\r\n                this.pageParam.page = 1;\r\n                this.getProject();\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style>\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./project-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./project-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./project-list.vue?vue&type=template&id=487a7755&\"\nimport script from \"./project-list.vue?vue&type=script&lang=js&\"\nexport * from \"./project-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}