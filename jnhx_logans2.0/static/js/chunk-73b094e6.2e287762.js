(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73b094e6"],{1653:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task pageSpace h100"},[s("my-breadcrumb"),s("div",{staticClass:"pageContent"},[s("a-table",{attrs:{defaultExpandAllRows:!0,columns:t.columns,"data-source":t.tableData,rowKey:"id"},scopedSlots:t._u([{key:"totalPro",fn:function(t,e){return s("span",{},[s("a-progress",{staticClass:"progress_sty",attrs:{percent:e.totalPro}})],1)}},{key:"primaryPro",fn:function(t,e){return s("span",{},[s("a-progress",{staticClass:"progress_sty",attrs:{percent:e.primaryPro}})],1)}},{key:"action",fn:function(e,a){return s("span",{},[s("a",{staticClass:"t-optColor-normal",on:{click:function(e){return t.pauseClick(a,-2)}}},[t._v("暂停")]),s("a",{staticClass:"t-optColor-normal",on:{click:function(e){return t.pauseClick(a,10)}}},[t._v("继续")]),s("a",{staticClass:"t-optColor-warning",attrs:{disabled:"project"!==a.type},on:{click:function(e){return t.deleteProject(a)}}},[t._v("删除")]),s("a",{staticClass:"t-optColor-success",attrs:{disabled:"dirRecords"!==a.type},on:{click:function(e){return t.fileRecordsDetail(a)}}},[t._v("详情")])])}},{key:"gmtCreate",fn:function(e,a){return s("span",{},[s("span",[t._v(t._s(t._f("dateFormatter")(a.gmtCreate,1)))])])}},{key:"startTime",fn:function(e,a){return s("span",{},[s("span",[t._v(t._s(t._f("dateFormatter")(a.startTime,1)))])])}},{key:"endTime",fn:function(e,a){return s("span",{},[s("span",[t._v(t._s(t._f("dateFormatter")(a.endTime,1)))])])}},{key:"reasons",fn:function(e,a){return s("span",{},[s("span",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"250px",display:"block"},attrs:{title:a.reasons}},[t._v(t._s(a.reasons))])])}}])})],1)],1)},n=[],o={name:"task",data:function(){return{columns:[{dataIndex:"name",title:"项目名称"},{dataIndex:"statusStr",title:"任务状态"},{dataIndex:"startTime",title:"开始时间",scopedSlots:{customRender:"startTime"}},{dataIndex:"endTime",title:"结束时间",scopedSlots:{customRender:"endTime"}},{dataIndex:"creator",title:"创建者"},{dataIndex:"gmtCreate",title:"创建时间",scopedSlots:{customRender:"gmtCreate"}},{dataIndex:"description",title:"描述"},{dataIndex:"totalPro",title:"总文件进度",scopedSlots:{customRender:"totalPro"}},{title:"操作",scopedSlots:{customRender:"action"}}],tableData:[],secondType:"",thirdType:"",startStatus:1,stopStatus:-10,timer:null}},methods:{stopData:function(t){var e=this;this.$confirm({title:"确认取消进度对话框",content:"取消后不可恢复",okText:"确认",cancelText:"取消",onOk:function(){if("project"===t.type)e.$API.editProject(Object.assign({id:t.id},{status:e.stopStatus})).then((function(t){1e3===t.code?(e.$message.success("进度停止"),e.getCollectList()):e.$message.warning("进度停止失败")}));else if("object"===t.type){var s={id:t.id,status:e.stopStatus};e.$API.updateProjectAnalysisMapper(s).then((function(t){1e3===t.code?(e.$message.success("进度停止"),e.getCollectList()):e.$message.warning("进度停止失败")}))}else e.$API.updateUsedRuleGroup(Object.assign({id:t.id},{status:e.stopStatus})).then((function(t){1e3===t.code?(e.$message.success("进度停止"),e.getCollectList()):e.$message.warning("进度停止失败")}))}})},getCollectList:function(){var t=this;this.$API.getCollectData().then((function(e){1e3===e.code?t.tableData=e.data:(t.tableData=[],t.$message.warning("暂无数据"))}))},pauseClick:function(t,e){var s=this;t.status=-2===e?-2:10;var a=new FormData;a.append("id",t.id),a.append("status",t.status),a.append("type",t.type),this.$API.editProject(a).then((function(t){1e3===t.code?-2===e?s.$message.success("执行任务已暂停"):s.$message.success("项目正在继续"):-2===e?s.$message.warning("暂停项目失败"):s.$message.warning("继续执行任务失败")}))},deleteProject:function(t){var e=this.$createElement,s=this;console.log(t),this.$confirm({title:"确定删除该条数据吗？",content:function(){return e("div",{style:"color:red"},[" 删除后将不可恢复 "])},okText:"确认删除",cancelText:"取消删除",onOk:function(){var e=this;s.$message.info("正在删除..."),s.$API.delProject(t.id).then((function(t){1e3===t.code?(s.$message.success("删除成功"),s.getProject()):(e.isLoading=!1,s.$message.warning(t.message))}))}})},fileRecordsDetail:function(t){this.$router.push({path:"/business/collect/fileRecordsDetail",query:{id:t.id}})}},created:function(){var t=this;this.getCollectList(),this.timer=setInterval((function(){t.getCollectList()}),3e3)},destroyed:function(){clearInterval(this.timer)}},i=o,r=(s("c36a"),s("2877")),c=Object(r["a"])(i,a,n,!1,null,null,null);e["default"]=c.exports},"9b70":function(t,e,s){},c36a:function(t,e,s){"use strict";var a=s("9b70"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-73b094e6.2e287762.js.map