{"version":3,"sources":["webpack:///./src/views/business/collect/task/task.vue?6bef","webpack:///src/views/business/collect/task/task.vue","webpack:///./src/views/business/collect/task/task.vue?72ee","webpack:///./src/views/business/collect/task/task.vue","webpack:///./src/views/business/collect/task/task.vue?8ff1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","columns","tableData","scopedSlots","_u","key","fn","text","record","totalPro","primaryPro","on","$event","pauseClick","_v","type","deleteProject","fileRecordsDetail","_s","_f","gmtCreate","startTime","endTime","staticStyle","reasons","staticRenderFns","component"],"mappings":"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","file":"js/chunk-73b094e6.2e287762.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"task pageSpace h100\"},[_c('my-breadcrumb'),_c('div',{staticClass:\"pageContent\"},[_c('a-table',{attrs:{\"defaultExpandAllRows\":true,\"columns\":_vm.columns,\"data-source\":_vm.tableData,\"rowKey\":\"id\"},scopedSlots:_vm._u([{key:\"totalPro\",fn:function(text,record){return _c('span',{},[_c('a-progress',{staticClass:\"progress_sty\",attrs:{\"percent\":record.totalPro}})],1)}},{key:\"primaryPro\",fn:function(text,record){return _c('span',{},[_c('a-progress',{staticClass:\"progress_sty\",attrs:{\"percent\":record.primaryPro}})],1)}},{key:\"action\",fn:function(text,record){return _c('span',{},[_c('a',{staticClass:\"t-optColor-normal\",on:{\"click\":function($event){return _vm.pauseClick(record,-2)}}},[_vm._v(\"暂停\")]),_c('a',{staticClass:\"t-optColor-normal\",on:{\"click\":function($event){return _vm.pauseClick(record,10)}}},[_vm._v(\"继续\")]),_c('a',{staticClass:\"t-optColor-warning\",attrs:{\"disabled\":record.type!=='project'},on:{\"click\":function($event){return _vm.deleteProject(record)}}},[_vm._v(\"删除\")]),_c('a',{staticClass:\"t-optColor-success\",attrs:{\"disabled\":record.type!=='dirRecords'},on:{\"click\":function($event){return _vm.fileRecordsDetail(record)}}},[_vm._v(\"详情\")])])}},{key:\"gmtCreate\",fn:function(text,record){return _c('span',{},[_c('span',[_vm._v(_vm._s(_vm._f(\"dateFormatter\")(record.gmtCreate,1)))])])}},{key:\"startTime\",fn:function(text,record){return _c('span',{},[_c('span',[_vm._v(_vm._s(_vm._f(\"dateFormatter\")(record.startTime,1)))])])}},{key:\"endTime\",fn:function(text,record){return _c('span',{},[_c('span',[_vm._v(_vm._s(_vm._f(\"dateFormatter\")(record.endTime,1)))])])}},{key:\"reasons\",fn:function(text,record){return _c('span',{},[_c('span',{staticStyle:{\"white-space\":\"nowrap\",\"overflow\":\"hidden\",\"text-overflow\":\"ellipsis\",\"max-width\":\"250px\",\"display\":\"block\"},attrs:{\"title\":record.reasons}},[_vm._v(_vm._s(record.reasons))])])}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"task pageSpace h100\">\r\n        <my-breadcrumb></my-breadcrumb>\r\n        <div class=\"pageContent\">\r\n            <a-table :defaultExpandAllRows=\"true\" :columns=\"columns\" :data-source=\"tableData\" rowKey=\"id\">\r\n                <span slot=\"totalPro\" slot-scope=\"text,record\">\r\n                    <a-progress :percent=\"record.totalPro\" class=\"progress_sty\"></a-progress>\r\n                </span>\r\n                <span slot=\"primaryPro\" slot-scope=\"text,record\">\r\n                    <a-progress :percent=\"record.primaryPro\" class=\"progress_sty\"></a-progress>\r\n                </span>\r\n                <span slot=\"action\" slot-scope=\"text,record\">\r\n<!--                    <a-button type=\"primary\" size=\"small\" class=\"startBtn\" @click=\"startData(record)\" :disabled=\"record.status === '开始'\">开始</a-button>-->\r\n                    <a class=\"t-optColor-normal\" @click=\"pauseClick(record,-2)\">暂停</a>\r\n                    <a class=\"t-optColor-normal\" @click=\"pauseClick(record,10)\">继续</a>\r\n                    <a class=\"t-optColor-warning\" @click=\"deleteProject(record)\" :disabled=\"record.type!=='project'\">删除</a>\r\n                    <a class=\"t-optColor-success\" :disabled=\"record.type!=='dirRecords'\" @click=\"fileRecordsDetail(record)\">详情</a>\r\n                </span>\r\n                <span slot=\"gmtCreate\" slot-scope=\"text,record\">\r\n                    <span>{{record.gmtCreate | dateFormatter(1)}}</span>\r\n                </span>\r\n                <span slot=\"startTime\" slot-scope=\"text,record\">\r\n                    <span>{{record.startTime | dateFormatter(1)}}</span>\r\n                </span>\r\n                <span slot=\"endTime\" slot-scope=\"text,record\">\r\n                    <span>{{record.endTime | dateFormatter(1)}}</span>\r\n                </span>\r\n                <span slot=\"reasons\" slot-scope=\"text,record\">\r\n                    <span :title=\"record.reasons\"\r\n                          style=\"white-space: nowrap;overflow: hidden;text-overflow: ellipsis;max-width:250px;display: block;\">{{record.reasons}}</span>\r\n                </span>\r\n            </a-table>\r\n            <!--  <div style=\"float: right;margin-top: 10px\">\r\n                  <a-pagination v-model=\"current\" :total=\"total\" :pageSize=\"pageSize\"></a-pagination>\r\n              </div>-->\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        name: 'task',\r\n        data() {\r\n            return {\r\n                // percent:'67',\r\n                /* total:0,\r\n                 current:1,\r\n                 pageSize:10,*/\r\n                columns: [\r\n                    {\r\n                        dataIndex: \"name\",\r\n                        title: \"项目名称\"\r\n                    },\r\n                    {\r\n                        dataIndex: 'statusStr',\r\n                        title: '任务状态'\r\n                    },\r\n                    {\r\n                        dataIndex: 'startTime',\r\n                        title: \"开始时间\",\r\n                        scopedSlots: {customRender: 'startTime'}\r\n                    },\r\n                    {\r\n                        dataIndex: 'endTime',\r\n                        title: \"结束时间\",\r\n                        scopedSlots: {customRender: 'endTime'}\r\n                    },\r\n                    {\r\n                        dataIndex: \"creator\",\r\n                        title: \"创建者\",\r\n                    },\r\n                    {\r\n                        dataIndex: 'gmtCreate',\r\n                        title: '创建时间',\r\n                        scopedSlots: {customRender: 'gmtCreate'}\r\n                    },\r\n                    {\r\n                        dataIndex: 'description',\r\n                        title: '描述'\r\n                    },\r\n                    {\r\n                        dataIndex: 'totalPro',\r\n                        title: '总文件进度',\r\n                        scopedSlots: {customRender: 'totalPro'}\r\n                    },\r\n                    /*{\r\n                      dataIndex:'primaryPro',\r\n                      title:'优先文件进度',\r\n                      scopedSlots:{customRender:'primaryPro'}\r\n                    },*/\r\n                    /* {\r\n                       dataIndex:'reasons',\r\n                       title:'失败原因',\r\n                       scopedSlots:{customRender:'reasons'}\r\n                     },*/\r\n\r\n                    {\r\n                        // key:'action',\r\n                        // dataIndex:'action',\r\n                        title: '操作',\r\n                        // width:'12%',\r\n                        scopedSlots: {customRender: 'action'}\r\n                    },\r\n\r\n                ],\r\n                tableData: [],\r\n                secondType: '',\r\n                thirdType: '',\r\n                startStatus: 1,\r\n                stopStatus: -10,\r\n                timer: null\r\n            }\r\n        },\r\n        methods: {\r\n            /* startData(row){\r\n               console.log('1cc1',row);\r\n               if (row.type === 'project'){\r\n                 this.$API.editProject(Object.assign({id:row.id},{status:this.startStatus})).then(res =>{\r\n                   if (res.code === 1000){\r\n                     this.$message.success('进度开始')\r\n\r\n                   }else {\r\n                     this.$message.warning('进度开始失败')\r\n                   }\r\n                 })\r\n               }else if(row.type === 'object'){\r\n                 let params={\r\n                   // projectId:row.projectId,\r\n                   id:row.id,\r\n                   status:this.startStatus\r\n                 };\r\n                 this.$API.updateProjectAnalysisMapper(params).then(res =>{\r\n                   if (res.code === 1000){\r\n                     this.$message.success('进度开始')\r\n\r\n                   }else {\r\n                     this.$message.warning('进度开始失败')\r\n                   }\r\n                 })\r\n\r\n               } else {\r\n                 this.$API.updateUsedRuleGroup(Object.assign({id:row.id},{status:this.startStatus})).then(res =>{\r\n                   if (res.code === 1000){\r\n                     this.$message.success('进度开始')\r\n\r\n                   }else {\r\n                     this.$message.warning('进度开始失败')\r\n                   }\r\n                 })\r\n\r\n               }\r\n\r\n             },*/\r\n            // 停止导入\r\n            stopData(row) {\r\n                const that = this;\r\n                this.$confirm({\r\n                    title: '确认取消进度对话框',\r\n                    content: '取消后不可恢复',\r\n                    okText: \"确认\",\r\n                    cancelText: \"取消\",\r\n                    onOk() {\r\n                        if (row.type === 'project') {\r\n                            that.$API.editProject(Object.assign({id: row.id}, {status: that.stopStatus})).then(res => {\r\n                                if (res.code === 1000) {\r\n                                    that.$message.success('进度停止');\r\n                                    that.getCollectList()\r\n\r\n                                } else {\r\n                                    that.$message.warning('进度停止失败')\r\n                                }\r\n                            })\r\n                        } else if (row.type === 'object') {\r\n                            let params = {\r\n                                id: row.id,\r\n                                status: that.stopStatus\r\n                            };\r\n                            that.$API.updateProjectAnalysisMapper(params).then(res => {\r\n                                if (res.code === 1000) {\r\n                                    that.$message.success('进度停止');\r\n                                    that.getCollectList()\r\n\r\n                                } else {\r\n                                    that.$message.warning('进度停止失败')\r\n                                }\r\n                            })\r\n\r\n                        } else {\r\n                            that.$API.updateUsedRuleGroup(Object.assign({id: row.id}, {status: that.stopStatus})).then(res => {\r\n                                if (res.code === 1000) {\r\n                                    that.$message.success('进度停止');\r\n                                    that.getCollectList()\r\n\r\n                                } else {\r\n                                    that.$message.warning('进度停止失败')\r\n                                }\r\n                            })\r\n\r\n                        }\r\n\r\n                    }\r\n                })\r\n\r\n            },\r\n            /**\r\n             * 获取表格数据\r\n             */\r\n            getCollectList() {\r\n                this.$API.getCollectData().then(res => {\r\n                    if (res.code === 1000) {\r\n                        this.tableData = res.data;\r\n                    } else {\r\n                        this.tableData = [];\r\n                        this.$message.warning('暂无数据')\r\n                    }\r\n                })\r\n            },\r\n            // 暂停\r\n            pauseClick(column, flag) {\r\n                if (flag === -2) {\r\n                    column.status = -2;\r\n                } else {\r\n                    column.status = 10;\r\n                }\r\n                let format = new FormData();\r\n                format.append(\"id\",column.id);\r\n                format.append(\"status\",column.status);\r\n                format.append(\"type\",column.type);\r\n                this.$API.editProject(format).then((res) => {\r\n                    if (res.code === 1000) {\r\n                        if (flag === -2) {\r\n                            this.$message.success(\"执行任务已暂停\");\r\n                        } else {\r\n                            this.$message.success(\"项目正在继续\");\r\n                        }\r\n                    } else {\r\n                        if (flag === -2) {\r\n                            this.$message.warning(\"暂停项目失败\");\r\n                        } else {\r\n                            this.$message.warning(\"继续执行任务失败\");\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            // 删除\r\n            deleteProject(column) {\r\n                const that = this;\r\n                console.log(column);\r\n                this.$confirm({\r\n                    title: \"确定删除该条数据吗？\",\r\n                    content: () => < div\r\n                style = \"color:red\" > 删除后将不可恢复 < /div>,\r\n                okText: \"确认删除\",\r\n                    cancelText\r\n            :\r\n                \"取消删除\",\r\n                    onOk()\r\n                {\r\n                    that.$message.info(\"正在删除...\");\r\n                    that.$API.delProject(column.id).then((res) => {\r\n                        if (res.code === 1000) {\r\n                            that.$message.success(\"删除成功\");\r\n                            that.getProject();\r\n                        } else {\r\n                            this.isLoading = false;\r\n                            that.$message.warning(res.message);\r\n                        }\r\n                    });\r\n                }\r\n            ,\r\n            });\r\n            },\r\n            // 页面跳转\r\n            fileRecordsDetail(record){\r\n                this.$router.push({\r\n                    path:'/business/collect/fileRecordsDetail',\r\n                    query:{\r\n                        id:record.id\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.getCollectList();\r\n            this.timer = setInterval(() => {\r\n                this.getCollectList();\r\n            }, 3000);\r\n        },\r\n        destroyed() {\r\n            // 组件销毁时 清除定时器\r\n            clearInterval(this.timer);\r\n        },\r\n    }\r\n</script>\r\n<style>\r\n    .stopBtn {\r\n        margin-left: 3px;\r\n        background: #faad14;\r\n        color: #ffffff;\r\n    }\r\n\r\n    .task .ant-table-row-expand-icon {\r\n        color: #1890ff;\r\n    }\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./task.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./task.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./task.vue?vue&type=template&id=4c7f4fb2&\"\nimport script from \"./task.vue?vue&type=script&lang=js&\"\nexport * from \"./task.vue?vue&type=script&lang=js&\"\nimport style0 from \"./task.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./task.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./task.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}