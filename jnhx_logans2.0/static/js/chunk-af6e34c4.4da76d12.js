(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af6e34c4","chunk-9a9e6cdc"],{"06c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");var a=n("6b75");function r(e,t){if(e){if("string"===typeof e)return Object(a["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a["a"])(e,t):void 0}}},"1c7e":function(e,t,n){var a=n("b622"),r=a("iterator"),i=!1;try{var o=0,c={next:function(){return{done:!!o++}},return:function(){i=!0}};c[r]=function(){return this},Array.from(c,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(s){}return n}},"25f0":function(e,t,n){"use strict";var a=n("6eeb"),r=n("825a"),i=n("d039"),o=n("ad6d"),c="toString",s=RegExp.prototype,d=s[c],u=i((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),l=d.name!=c;(u||l)&&a(RegExp.prototype,c,(function(){var e=r(this),t=String(e.source),n=e.flags,a=String(void 0===n&&e instanceof RegExp&&!("flags"in s)?o.call(e):n);return"/"+t+"/"+a}),{unsafe:!0})},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("6b75");function r(e){if(Array.isArray(e))return Object(a["a"])(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var o=n("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return r(e)||i(e)||Object(o["a"])(e)||c()}},"6a7d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"newField pageSpace h100"},[n("my-breadcrumb"),n("div",{staticClass:"pageContent"},[n("a-layout",{staticClass:"w100 h100"},[n("a-layout-sider",{staticStyle:{"overflow-y":"auto"},attrs:{width:"300"}},[e.treeData.length>0?n("div",[n("a-tree",{attrs:{"tree-data":e.treeData,"show-line":!0,defaultExpandedKeys:e.defaultExpandedKeys,defaultSelectedKeys:e.defaultSelctedKeys,replaceFields:e.replaceFields},on:{select:e.nodeClick}})],1):n("div",[n("a-alert",{attrs:{type:"info",message:"未发现数据"}})],1)]),n("a-layout",{staticClass:"in-content"},[n("field",{attrs:{fieldData:e.dicData,currentNode:e.currentNode},on:{refresh:function(t){return e.getDicData(e.currentNode.id,e.currentNode.ownerType)}}})],1)],1)],1)],1)},r=[],i=(n("99af"),n("4160"),n("d81d"),n("159b"),n("2909")),o=n("8de8"),c={name:"newField",components:{field:o["default"]},data:function(){return{treeData:[],replaceFields:{children:"children",title:"name",key:"id"},dicData:[],currentNode:{},defaultSelctedKeys:[],defaultExpandedKeys:[]}},computed:{},watch:{},methods:{getTreeData:function(){var e=this;this.$API.searchTreeGlobal().then((function(t){1e3===t.code?(e.treeData=e.getParentByChildId(t.data),e.defaultSelctedKeys=[e.treeData[0].id],e.defaultExpandedKeys=e.treeData.map((function(e){return e.id})),sessionStorage.getItem("curNode")?(e.currentNode=JSON.parse(sessionStorage.getItem("curNode")),e.defaultSelctedKeys=[e.currentNode.id],2===e.currentNode.ownerType&&(e.defaultExpandedKeys=[].concat(Object(i["a"])(e.defaultExpandedKeys),[e.currentNode.pid]))):(e.currentNode=e.treeData[0],sessionStorage.setItem("curNode",JSON.stringify(e.currentNode))),e.getDicData(e.currentNode.id,e.currentNode.ownerType)):(e.treeData=[],e.$message.warning(t.message))}))},getDicData:function(e,t){var n=this;this.$API.searchDic({id:e,ownerType:t}).then((function(e){1e3===e.code?n.dicData=e.data:(n.dicData=[],n.$message.warning(e.message))}))},nodeClick:function(e,t){var n=t.selectedNodes[0].data.props;this.currentNode=n,sessionStorage.setItem("curNode",JSON.stringify(this.currentNode)),this.getDicData(n.id,n.ownerType)},getParentByChildId:function(e){return e.forEach((function(e){e.pid=0,e.children.forEach((function(t){t.pid=e.id,t.children.forEach((function(e){e.pid=t.id}))}))})),e}},created:function(){this.getTreeData()}},s=c,d=(n("a803"),n("2877")),u=Object(d["a"])(s,a,r,!1,null,null,null);t["default"]=u.exports},"6b75":function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,"a",(function(){return a}))},"7a33":function(e,t,n){},"7b69":function(e,t,n){"use strict";var a=n("7a33"),r=n.n(a);r.a},"8de8":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field pageSpace h100"},[n("a-layout-content",[n("div",{attrs:{clss:"field"}},[n("div",{staticClass:"tableTopTools clearfix"},[n("div",{staticClass:"buttons fl"},[n("p",{staticClass:"toolName fl"},[e._v("工具栏：")]),n("a-button",{attrs:{type:"primary"},on:{click:e.optfield}},[n("a-icon",{attrs:{type:"plus"}}),e._v("添加字段 ")],1)],1)]),n("div",{staticClass:"tableContent"},[n("a-table",{attrs:{columns:e.columns,dataSource:e.fieldData,rowKey:"id",pagination:{pageSize:50}},scopedSlots:e._u([{key:"num",fn:function(t,a,r){return n("div",{staticClass:"clearfix"},[n("div",{staticClass:"tableNum fl"},[e._v(e._s(r+1))])])}},{key:"gmtCreate",fn:function(t,a){return n("span",{},[n("span",[e._v(e._s(e._f("dateFormatter")(a.gmtCreate,1)))])])}},{key:"gmtModified",fn:function(t,a){return n("span",{},[n("span",[e._v(e._s(e._f("dateFormatter")(a.gmtModified,1)))])])}},{key:"action",fn:function(t,a){return n("span",{},[n("a",{staticClass:"t-optColor-normal",on:{click:function(t){return e.editfield(a)}}},[e._v("编辑")]),n("a",{staticClass:"t-optColor-warning",on:{click:function(t){return e.deletefield(a)}}},[e._v("删除")])])}},{key:"isEnabled",fn:function(t,a){return n("span",{},[n("a-switch",{attrs:{size:"small"},on:{change:function(t){return e.onSwitchChange(a)}},model:{value:a.isEnabled,callback:function(t){e.$set(a,"isEnabled",t)},expression:"record.isEnabled"}})],1)}}])})],1)])])],1)},r=[],i=n("b85c"),o={name:"project-list",props:{fieldData:{type:Array,default:function(){return[]}},currentNode:{}},data:function(){return{columns:[{dataIndex:"num",title:"序号",scopedSlots:{customRender:"num"}},{dataIndex:"cname",title:"字段名称"},{dataIndex:"ename",title:"字段英文名"},{dataIndex:"type",title:"字段数据类型"},{dataIndex:"creator",title:"创建者"},{dataIndex:"gmtCreate",title:"创建时间",scopedSlots:{customRender:"gmtCreate"}},{dataIndex:"gmtModified",title:"最近更新时间",scopedSlots:{customRender:"gmtModified"}},{dataIndex:"action",title:"操作",scopedSlots:{customRender:"action"}}],pageParam:{page:1,size:500,channelId:this.$route.query.id},customPage:{page:1,size:10},searchInput:"",total:0,extraBreadcrumb:["频道字段管理",this.$route.query.cname]}},computed:{num:function(){return(this.pageParam.page-1)*this.pageParam.size}},methods:{adjust:function(e,t,n,a){var r=this;console.log(e),console.log(n),console.log(t),console.log(a);var i=[{id:e,findex:a},{id:t,findex:n}];console.log(i);var o={list:i};this.$API.bathUpdate(o).then((function(e){1e3===e.code?r.getfield():r.$message.error("调整字段顺序错误")}))},getfield:function(){var e=this;this.$API.searchField(this.pageParam).then((function(t){if(1e3===t.code){var n,a=Object(i["a"])(t.data);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.isEnabled=1===r.isEnabled}}catch(o){a.e(o)}finally{a.f()}e.fieldData=t.data,e.total=t.total}else e.fieldData=[]}))},optfield:function(){console.log(this.fieldData),console.log(this.currentNode),this.$router.push({path:"/business/setting/field/add",query:{cid:this.currentNode.id,ctype:this.currentNode.ownerType}})},editfield:function(e){this.$router.push({path:"/business/setting/field/edit",query:{channelId:this.$route.query.id,fieldId:e.id,channelName:this.$route.query.cname}})},deletefield:function(e){var t=this.$createElement,n=this;this.$confirm({title:"确定删除该条数据吗？",content:function(){return t("div",{style:"color:red"},["删除后将不可恢复"])},okText:"确认删除",cancelText:"取消删除",onOk:function(){n.$API.delField(e.id).then((function(e){1e3===e.code?(n.$message.success("删除成功"),n.$emit("refresh",!0)):n.$message.warning(e.message)}))}})},pageChange:function(){this.getfield()},keywordChange:function(){this.pageParam.page=1,this.getfield()},onSwitchChange:function(e){var t=this,n={id:e.id,isEnabled:e.isEnabled?1:0};this.$API.editField(n).then((function(e){1e3===e.code?(t.$message.success("字段更新成功"),t.fieldVisible=!1,t.getfield()):t.$message.warning(e.message)}))}},created:function(){}},c=o,s=(n("7b69"),n("2877")),d=Object(s["a"])(c,a,r,!1,null,null,null);t["default"]=d.exports},a630:function(e,t,n){var a=n("23e7"),r=n("4df4"),i=n("1c7e"),o=!i((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:o},{from:r})},a803:function(e,t,n){"use strict";var a=n("d95c"),r=n.n(a);r.a},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("06c5");function r(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(a["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}},d28b:function(e,t,n){var a=n("746f");a("iterator")},d95c:function(e,t,n){},e01a:function(e,t,n){"use strict";var a=n("23e7"),r=n("83ab"),i=n("da84"),o=n("5135"),c=n("861d"),s=n("9bf2").f,d=n("e893"),u=i.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var l={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new u(e):void 0===e?u():u(e);return""===e&&(l[t]=!0),t};d(f,u);var p=f.prototype=u.prototype;p.constructor=f;var h=p.toString,g="Symbol(test)"==String(u("test")),y=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var e=c(this)?this.valueOf():this,t=h.call(e);if(o(l,e))return"";var n=g?t.slice(7,-1):t.replace(y,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:f})}},fb6a:function(e,t,n){"use strict";var a=n("23e7"),r=n("861d"),i=n("e8b5"),o=n("23cb"),c=n("50c4"),s=n("fc6a"),d=n("8418"),u=n("b622"),l=n("1dde"),f=n("ae40"),p=l("slice"),h=f("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),y=[].slice,m=Math.max;a({target:"Array",proto:!0,forced:!p||!h},{slice:function(e,t){var n,a,u,l=s(this),f=c(l.length),p=o(e,f),h=o(void 0===t?f:t,f);if(i(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return y.call(l,p,h);for(a=new(void 0===n?Array:n)(m(h-p,0)),u=0;p<h;p++,u++)p in l&&d(a,u,l[p]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-af6e34c4.4da76d12.js.map