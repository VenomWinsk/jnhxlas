(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2df0a30"],{"25f0":function(e,t,s){"use strict";var a=s("6eeb"),l=s("825a"),r=s("d039"),i=s("ad6d"),u="toString",c=RegExp.prototype,n=c[u],o=r((function(){return"/a/b"!=n.call({source:"a",flags:"b"})})),p=n.name!=u;(o||p)&&a(RegExp.prototype,u,(function(){var e=l(this),t=String(e.source),s=e.flags,a=String(void 0===s&&e instanceof RegExp&&!("flags"in c)?i.call(e):s);return"/"+t+"/"+a}),{unsafe:!0})},bcd9:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"expression pageSpace h100"},[s("my-breadcrumb"),s("div",{staticClass:"pageContent"},[s("a-layout-content",[s("a-form-model",{ref:"basic_rules",attrs:{model:e.basic_rules,rules:e.ruleFormRule}},[s("a-form-model-item",{attrs:{label:"日志数据",prop:"logFeature"}},[s("a-input",{attrs:{placeholder:"请输入一条日志数据"},model:{value:e.basic_rules.logFeature,callback:function(t){e.$set(e.basic_rules,"logFeature",t)},expression:"basic_rules.logFeature"}})],1),s("a-form-model-item",{attrs:{label:"提取表达式"}},[s("a-input",{attrs:{placeholder:"用于提取字段，形如 %{IPV4>>ip},%{DATA>>result}"},model:{value:e.basic_rules.extractRule,callback:function(t){e.$set(e.basic_rules,"extractRule",t)},expression:"basic_rules.extractRule"}})],1),s("a-form-model-item",{attrs:{label:"转换表达式"}},[s("a-input",{attrs:{placeholder:"对提取字段进一步处理，形如 ip:$getGeo>>country,city"},model:{value:e.basic_rules.switchRule,callback:function(t){e.$set(e.basic_rules,"switchRule",t)},expression:"basic_rules.switchRule"}})],1),s("a-form-model-item",{attrs:{label:"替换表达式"}},[s("a-input",{attrs:{placeholder:"对提取字段进一步处理，形如 result==succeed>>result=success"},model:{value:e.basic_rules.replaceRule,callback:function(t){e.$set(e.basic_rules,"replaceRule",t)},expression:"basic_rules.replaceRule"}})],1),s("a-form-model-item",{attrs:{label:"补充表达式"}},[s("a-input",{attrs:{placeholder:"用于补充字段，形如:{“type”:“http”,“opt”:“login”}"},model:{value:e.basic_rules.supplementRule,callback:function(t){e.$set(e.basic_rules,"supplementRule",t)},expression:"basic_rules.supplementRule"}})],1)],1),s("div",{staticClass:"ar"},[s("a-button",{staticStyle:{margin:"20px 0"},attrs:{type:"primary"},on:{click:e.testRules}},[e._v("测试")]),s("a-button",{staticStyle:{margin:"20px"},attrs:{type:"default"},on:{click:e.reset}},[e._v("重置")])],1)],1),e.tabelFlag?s("div",{staticStyle:{overflow:"auto"}},[s("a-table",{attrs:{id:"textTable",columns:e.columns,dataSource:e.expressionData,pagination:!1}})],1):e._e()],1)],1)},l=[],r=(s("d81d"),s("b64b"),s("d3b7"),s("25f0"),{name:"expression",data:function(){return{basic_rules:{logFeature:"",extractRule:"",switchRule:"",replaceRule:"",supplementRule:""},ruleFormRule:{extractRule:[{required:!0,message:"请输入规则名称",trigger:"change"}],logFeature:[{required:!0,message:"请输入日志数据",trigger:"blur"}]},referenceVisible:!1,columns:[],expressionData:[],tabelFlag:!1}},methods:{reset:function(){this.basic_rules.logFeature="",this.basic_rules.extractRule="",this.basic_rules.switchRule="",this.basic_rules.replaceRule="",this.basic_rules.supplementRule=""},handleOk:function(e){console.log(e)},openReference:function(){this.referenceVisible=!this.referenceVisible},testRules:function(){var e,t=this;this.tabelFlag=!0;var s=!0;if(""!==this.basic_rules.extractRule&&this.$fun.regularRules(this.basic_rules.extractRule))this.$message.warning("提取表达式 >>后面不能是数字，请正确填写");else if(this.basic_rules.logFeature)if(this.basic_rules.extractRule){try{e=this.basic_rules.supplementRule?JSON.parse(this.basic_rules.supplementRule):"",e&&"[object Object]"!==Object.prototype.toString.call(e)&&(s=!1,this.$message.warning("补充表达式输入格式有误，请正确填写"))}catch(l){return s=!1,void this.$message.warning("补充表达式输入有误，请正确填写")}if(s){var a={src_str:this.basic_rules.logFeature,extract_rule:this.basic_rules.extractRule,switch_rule:this.basic_rules.switchRule,replace_rule:this.basic_rules.replaceRule,supplement:""===e?{}:e,testFilePaths:"",testFilrRule:"",flag:!1};this.$API.test_rule(a).then((function(e){Array.isArray(e)&&e.length>0?(t.columns=Object.keys(e[0]).map((function(e){return{dataIndex:e,title:e}})),t.expressionData=e):e.error?t.$message.error(e.error):0===e.length&&t.$message.error("出现异常,缺少提取语句或赋值语句")})).catch((function(e){console.log(e),t.$message.error("表达式测试服务异常，请联系管理员")})),this.expressionData=""}}else this.$message.warning("请填入提取表达式");else this.$message.warning("请填入日志数据")},close:function(){this.referenceVisible=!1}}}),i=r,u=(s("c52a"),s("2877")),c=Object(u["a"])(i,a,l,!1,null,null,null);t["default"]=c.exports},c52a:function(e,t,s){"use strict";var a=s("fc7d"),l=s.n(a);l.a},fc7d:function(e,t,s){}}]);
//# sourceMappingURL=chunk-d2df0a30.81efff5e.js.map