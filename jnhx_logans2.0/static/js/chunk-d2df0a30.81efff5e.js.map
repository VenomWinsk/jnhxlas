{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/views/business/setting/expression/expression.vue?88b7","webpack:///src/views/business/setting/expression/expression.vue","webpack:///./src/views/business/setting/expression/expression.vue?2aa1","webpack:///./src/views/business/setting/expression/expression.vue","webpack:///./src/views/business/setting/expression/expression.vue?95ec"],"names":["redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","String","rf","f","undefined","unsafe","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","basic_rules","ruleFormRule","model","value","callback","$$v","$set","expression","staticStyle","on","testRules","_v","reset","columns","expressionData","_e","staticRenderFns","data","logFeature","extractRule","switchRule","replaceRule","supplementRule","referenceVisible","tabelFlag","methods","handleOk","console","log","e","openReference","$fun","regularRules","$message","warning","temp","flag","src_str","extract_rule","switch_rule","replace_rule","supplement","testFilePaths","testFilrRule","$API","test_rule","params","then","Array","isArray","res","length","dataIndex","keys","title","close","component"],"mappings":"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","file":"js/chunk-d2df0a30.81efff5e.js","sourcesContent":["'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"expression pageSpace h100\"},[_c('my-breadcrumb'),_c('div',{staticClass:\"pageContent\"},[_c('a-layout-content',[_c('a-form-model',{ref:\"basic_rules\",attrs:{\"model\":_vm.basic_rules,\"rules\":_vm.ruleFormRule}},[_c('a-form-model-item',{attrs:{\"label\":\"日志数据\",\"prop\":\"logFeature\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入一条日志数据\"},model:{value:(_vm.basic_rules.logFeature),callback:function ($$v) {_vm.$set(_vm.basic_rules, \"logFeature\", $$v)},expression:\"basic_rules.logFeature\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"提取表达式\"}},[_c('a-input',{attrs:{\"placeholder\":\"用于提取字段，形如 %{IPV4>>ip},%{DATA>>result}\"},model:{value:(_vm.basic_rules.extractRule),callback:function ($$v) {_vm.$set(_vm.basic_rules, \"extractRule\", $$v)},expression:\"basic_rules.extractRule\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"转换表达式\"}},[_c('a-input',{attrs:{\"placeholder\":\"对提取字段进一步处理，形如 ip:$getGeo>>country,city\"},model:{value:(_vm.basic_rules.switchRule),callback:function ($$v) {_vm.$set(_vm.basic_rules, \"switchRule\", $$v)},expression:\"basic_rules.switchRule\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"替换表达式\"}},[_c('a-input',{attrs:{\"placeholder\":\"对提取字段进一步处理，形如 result==succeed>>result=success\"},model:{value:(_vm.basic_rules.replaceRule),callback:function ($$v) {_vm.$set(_vm.basic_rules, \"replaceRule\", $$v)},expression:\"basic_rules.replaceRule\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"补充表达式\"}},[_c('a-input',{attrs:{\"placeholder\":\"用于补充字段，形如:{“type”:“http”,“opt”:“login”}\"},model:{value:(_vm.basic_rules.supplementRule),callback:function ($$v) {_vm.$set(_vm.basic_rules, \"supplementRule\", $$v)},expression:\"basic_rules.supplementRule\"}})],1)],1),_c('div',{staticClass:\"ar\"},[_c('a-button',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.testRules}},[_vm._v(\"测试\")]),_c('a-button',{staticStyle:{\"margin\":\"20px\"},attrs:{\"type\":\"default\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)],1),(_vm.tabelFlag)?_c('div',{staticStyle:{\"overflow\":\"auto\"}},[_c('a-table',{attrs:{\"id\":\"textTable\",\"columns\":_vm.columns,\"dataSource\":_vm.expressionData,\"pagination\":false}})],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable vue/no-parsing-error */\r\n<template>\r\n  <div class=\"expression pageSpace h100\">\r\n    <my-breadcrumb></my-breadcrumb>\r\n    <div class=\"pageContent\">\r\n      <a-layout-content>\r\n        <a-form-model :model=\"basic_rules\" ref=\"basic_rules\" :rules=\"ruleFormRule\">\r\n          <a-form-model-item label=\"日志数据\" prop=\"logFeature\">\r\n            <a-input placeholder=\"请输入一条日志数据\" v-model=\"basic_rules.logFeature\" />\r\n          </a-form-model-item>\r\n\r\n          <a-form-model-item label=\"提取表达式\">\r\n            <a-input placeholder=\"用于提取字段，形如 %{IPV4>>ip},%{DATA>>result}\" v-model=\"basic_rules.extractRule\" />\r\n          </a-form-model-item>\r\n\r\n          <a-form-model-item label=\"转换表达式\">\r\n            <a-input placeholder=\"对提取字段进一步处理，形如 ip:$getGeo>>country,city\" v-model=\"basic_rules.switchRule\" />\r\n          </a-form-model-item>\r\n\r\n          <a-form-model-item label=\"替换表达式\">\r\n            <a-input placeholder=\"对提取字段进一步处理，形如 result==succeed>>result=success\" v-model=\"basic_rules.replaceRule\" />\r\n          </a-form-model-item>\r\n\r\n          <a-form-model-item label=\"补充表达式\">\r\n            <a-input placeholder='用于补充字段，形如:{“type”:“http”,“opt”:“login”}' v-model=\"basic_rules.supplementRule\" />\r\n          </a-form-model-item>\r\n        </a-form-model>\r\n        <div class=\"ar\">\r\n          <a-button type=\"primary\" style=\"margin: 20px 0\" @click=\"testRules\">测试</a-button>\r\n          <a-button type=\"default\" style=\"margin: 20px\" @click=\"reset\">重置</a-button>\r\n        </div>\r\n      </a-layout-content>\r\n      <div v-if=\"tabelFlag\" style=\"overflow: auto;\">\r\n        <a-table id=\"textTable\" :columns=\"columns\" :dataSource=\"expressionData\" :pagination=\"false\"></a-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import referenceModal from \"@/components/myModal/referenceModal.vue\";\r\n\r\nexport default {\r\n  name: \"expression\",\r\n  // components: { referenceModal },\r\n  data() {\r\n    return {\r\n      basic_rules: {\r\n        logFeature: \"\",\r\n        extractRule: \"\",\r\n        switchRule: \"\",\r\n        replaceRule: \"\",\r\n        supplementRule: \"\",\r\n      },\r\n      ruleFormRule: {\r\n        extractRule: [\r\n          { required: true, message: \"请输入规则名称\", trigger: \"change\" },\r\n        ],\r\n          logFeature: [{ required: true, message: \"请输入日志数据\",trigger:'blur' }],\r\n      },\r\n      referenceVisible: false,\r\n      columns: [],\r\n      expressionData: [],\r\n      tabelFlag: false,\r\n    };\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.basic_rules.logFeature = \"\";\r\n      this.basic_rules.extractRule = \"\";\r\n      this.basic_rules.switchRule = \"\";\r\n      this.basic_rules.replaceRule = \"\";\r\n      this.basic_rules.supplementRule = \"\";\r\n    },\r\n    handleOk(e) {\r\n      console.log(e);\r\n    },\r\n    openReference() {\r\n      this.referenceVisible = !this.referenceVisible;\r\n    },\r\n    testRules() {\r\n      this.tabelFlag = true;\r\n      let temp;\r\n      let flag = true;\r\n      if (this.basic_rules.extractRule !== \"\") {\r\n        if (this.$fun.regularRules(this.basic_rules.extractRule)) {\r\n          this.$message.warning(\"提取表达式 >>后面不能是数字，请正确填写\");\r\n          return;\r\n        }\r\n      }\r\n      if (!this.basic_rules.logFeature) {\r\n        this.$message.warning(\"请填入日志数据\");\r\n        return;\r\n      }\r\n      if (!this.basic_rules.extractRule) {\r\n        this.$message.warning(\"请填入提取表达式\");\r\n        return;\r\n      }\r\n      try {\r\n        temp = this.basic_rules.supplementRule\r\n          ? JSON.parse(this.basic_rules.supplementRule)\r\n          : \"\";\r\n        if (\r\n          temp &&\r\n          Object.prototype.toString.call(temp) !== \"[object Object]\"\r\n        ) {\r\n          flag = false;\r\n          this.$message.warning(\"补充表达式输入格式有误，请正确填写\");\r\n        }\r\n      } catch (err) {\r\n        flag = false;\r\n        this.$message.warning(\"补充表达式输入有误，请正确填写\");\r\n        return;\r\n      }\r\n      if (!flag) {\r\n        return;\r\n      }\r\n      let params = {\r\n        src_str: this.basic_rules.logFeature,\r\n        extract_rule: this.basic_rules.extractRule,\r\n        switch_rule: this.basic_rules.switchRule,\r\n        replace_rule: this.basic_rules.replaceRule,\r\n        supplement: temp === \"\" ? {} : temp,\r\n        testFilePaths:\"\",\r\n        testFilrRule:\"\",\r\n        flag:false,\r\n      };\r\n      this.$API.test_rule(params).then((res) => {\r\n        if (Array.isArray(res) && res.length>0) {\r\n          this.columns = Object.keys(res[0]).map((keys) => {\r\n            return {\r\n              dataIndex: keys,\r\n              title: keys,\r\n            };\r\n          });\r\n          this.expressionData = res;\r\n        } else if (res.error) {\r\n          this.$message.error(res.error);\r\n        } else if (res.length === 0) {\r\n          this.$message.error(\"出现异常,缺少提取语句或赋值语句\");\r\n        }\r\n      }).catch(err =>{\r\n          console.log(err);\r\n          this.$message.error(\"表达式测试服务异常，请联系管理员\");\r\n      });\r\n        this.expressionData = '';\r\n    },\r\n    close() {\r\n      this.referenceVisible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#textTable .ant-table-tbody > tr > td {\r\n  max-width: 400px;\r\n}\r\n.expressCls .ant-modal-content,\r\n.fieldCls .ant-modal-header {\r\n  background-color: #054273;\r\n  color: #fff;\r\n}\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./expression.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./expression.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./expression.vue?vue&type=template&id=3a660f12&\"\nimport script from \"./expression.vue?vue&type=script&lang=js&\"\nexport * from \"./expression.vue?vue&type=script&lang=js&\"\nimport style0 from \"./expression.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./expression.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./expression.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}