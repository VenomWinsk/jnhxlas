(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd4a0516"],{"1a14d":function(e,t,a){},"34cc":function(e,t,a){},"586e":function(e,t,a){"use strict";var n=a("1a14d"),c=a.n(n);c.a},7156:function(e,t,a){var n=a("861d"),c=a("d2bb");e.exports=function(e,t,a){var o,l;return c&&"function"==typeof(o=t.constructor)&&o!==a&&n(l=o.prototype)&&l!==a.prototype&&c(e,l),e}},a3ef:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"config pageSpace h100"},[a("my-breadcrumb"),a("div",{staticClass:"pageContent"},[a("a-layout-content",[a("div",{staticClass:"channel"},[a("div",{staticClass:"tableTopTools clearfix"},[a("div",{staticClass:"buttons fl"},[a("p",{staticClass:"toolName fl"},[e._v("工具栏：")]),a("a-button",{attrs:{type:"primary"},on:{click:e.optchannel}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" 添加频道 ")],1)],1)]),a("div",{staticClass:"tableContent"},[a("a-table",{attrs:{columns:e.columns,dataSource:e.channelData,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"objectId",fn:function(t,n){return a("span",{},[a("span",[e._v(e._s(e._f("getObjectCnById")(n.objectId,e.that)))])])}},{key:"gmtCreate",fn:function(t,n){return a("span",{},[a("span",[e._v(e._s(e._f("dateFormatter")(n.gmtCreate,1)))])])}},{key:"gmtModified",fn:function(t,n){return a("span",{},[a("span",[e._v(e._s(e._f("dateFormatter")(n.gmtModified,1)))])])}},{key:"action",fn:function(t,n){return a("span",{},[a("a",{staticClass:"t-optColor-normal",on:{click:function(t){return e.editchannel(n)}}},[e._v("编辑")]),a("a",{staticClass:"t-optColor-warning",on:{click:function(t){return e.deletechannel(n)}}},[e._v("删除")]),a("a",{staticClass:"t-optColor-success",on:{click:function(a){return e.openField(t,n)}}},[e._v("详情")]),a("a",{staticClass:"t-optColor-success",on:{click:function(a){return e.cloneChannel(t,n)}}},[e._v("克隆")])])}}])}),e.channelData.length>0?a("div",{staticClass:"ar",staticStyle:{"margin-top":"30px"}},[a("a-pagination",{attrs:{total:e.total,"page-size":e.pageParam.size},on:{change:e.pageChange},model:{value:e.pageParam.page,callback:function(t){e.$set(e.pageParam,"page",t)},expression:"pageParam.page"}})],1):e._e()],1),a("channelModal",{attrs:{channelVisible:e.channelVisible,content:e.content,optType:e.optType},on:{channelOk:e.channelOk,channelCancel:e.channelCancel}}),a("a-modal",{staticClass:"modalCls",attrs:{title:"克隆字段信息",visible:e.cloneVisible,cancelText:"取消",okText:"确定",mask:!1,width:600},on:{cancel:e.cloneCancel}},[a("a-form-model",{ref:"cloneForm",attrs:{model:e.cloneForm,rules:e.cloneFormRule}},[a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("span",{staticStyle:{color:"#ccc"}},[e._v("要克隆频道：")]),a("span",{staticStyle:{color:"#faad14"}},[e._v(e._s(e.cloneData.cname))])])],1),a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"新频道名称",prop:"cname"}},[a("a-input",{attrs:{placeholder:"请输入要克隆的新频道名称"},model:{value:e.cloneForm.cname,callback:function(t){e.$set(e.cloneForm,"cname",t)},expression:"cloneForm.cname"}})],1)],1)],1),a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"新频道别名",prop:"ename"}},[a("a-input",{attrs:{placeholder:"请输入要克隆的新频道唯一别名"},model:{value:e.cloneForm.ename,callback:function(t){e.$set(e.cloneForm,"ename",t)},expression:"cloneForm.ename"}})],1)],1)],1),a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"新频道所属分析对象",prop:"objectId"}},[a("a-select",{attrs:{placeholder:"请为新频道选择分析对象",allowClear:""},model:{value:e.cloneForm.objectId,callback:function(t){e.$set(e.cloneForm,"objectId",t)},expression:"cloneForm.objectId"}},e._l(e.objectNameData,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id,disabled:1===t.isBind}},[e._v(e._s(t.objectName)+" "),1===t.isBind?a("span",[e._v("（已绑定）")]):e._e()])})),1)],1)],1)],1),a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"新频道描述",prop:"description"}},[a("a-textarea",{attrs:{placeholder:"请输入新频道描述信息",rows:"4"},model:{value:e.cloneForm.description,callback:function(t){e.$set(e.cloneForm,"description",t)},expression:"cloneForm.description"}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"link",ghost:""},on:{click:e.cloneCancel}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.cloneOk}},[e._v("提交")])],1)],2)],1)])],1)],1)},c=[],o=a("5530"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"channel-modal"},[a("a-modal",{staticClass:"channelCls",attrs:{title:e.title,visible:e.channelVisible,cancelText:"取消",okText:"确定",mask:!1,maskClosable:!1,width:600},on:{cancel:e.handleCancel}},[a("a-form-model",{ref:"channelForm",attrs:{model:e.channelForm,rules:e.channelFormRule}},[a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"频道名称",prop:"cname"}},[a("a-input",{attrs:{placeholder:"请输入频道名称"},model:{value:e.channelForm.cname,callback:function(t){e.$set(e.channelForm,"cname",t)},expression:"channelForm.cname"}})],1)],1)],1),a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"频道别名",prop:"ename"}},[a("a-input",{attrs:{placeholder:"请输入频道唯一别名"},model:{value:e.channelForm.ename,callback:function(t){e.$set(e.channelForm,"ename",t)},expression:"channelForm.ename"}})],1)],1)],1),a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"分析对象",prop:"objectId"}},[a("a-select",{attrs:{placeholder:"请选择分析对象",allowClear:""},model:{value:e.channelForm.objectId,callback:function(t){e.$set(e.channelForm,"objectId",t)},expression:"channelForm.objectId"}},e._l(e.objectData,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id,disabled:1===t.isBind&&t.id!==e.currentData.objectId}},[e._v(e._s(t.objectName)+" "),1===t.isBind&&t.id!==e.currentData.objectId?a("span",[e._v("（已绑定）")]):e._e(),1===t.isBind&&t.id===e.currentData.objectId?a("span",[e._v("（当前绑定）")]):e._e()])})),1)],1)],1)],1),a("a-row",{attrs:{gutter:[24,24],type:"flex",justify:"center"}},[a("a-col",{staticStyle:{padding:"0 12px 12px"},attrs:{xxl:24,xl:24}},[a("a-form-model-item",{attrs:{label:"频道描述",prop:"description"}},[a("a-textarea",{attrs:{placeholder:"请输入频道描述信息",rows:"4"},model:{value:e.channelForm.description,callback:function(t){e.$set(e.channelForm,"description",t)},expression:"channelForm.description"}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"link",ghost:""},on:{click:e.handleCancel}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("提交")])],1)],2)],1)},s=[],i=(a("a9e3"),a("2f62")),r={name:"channel-modal",props:{channelVisible:{type:Boolean,default:!1,required:!0},title:{type:String,default:"添加/编辑频道"},content:{type:Object,default:function(){return{id:"",cname:"",ename:"",description:"",creator:"",createTime:"",updateTime:""}}},optType:{type:Number,default:0,required:!0}},data:function(){return{channelFormRule:{cname:[{required:!0,message:"请输入频道名称"}],ename:[{required:!0,message:"请输入频道别名"}],objectId:[{required:!0,message:"请选择分析对象"}]},channelForm:{cname:"",ename:"",description:"",objectId:""},objectNameData:[],currentData:{}}},computed:Object(o["a"])({},Object(i["b"])(["objectData"])),methods:{handleOk:function(){var e=this;this.$refs.channelForm.validate((function(t){if(!t)return e.$message.warning("输入有误，请检查"),!1;e.$emit("channelOk",{formContent:e.channelForm,optType:e.optType})}))},handleCancel:function(){this.$emit("channelCancel","我点击取消")}},watch:{content:{handler:function(e){this.currentData=Object.assign({},e),Object.assign(this.channelForm,e)},deep:!0}},created:function(){}},d=r,m=(a("586e"),a("2877")),p=Object(m["a"])(d,l,s,!1,null,null,null),u=p.exports,h={name:"project-list",components:{channelModal:u},computed:Object(o["a"])({},Object(i["b"])(["objectData"])),data:function(){return{columns:[{dataIndex:"cname",title:"频道名称"},{dataIndex:"objectId",title:"分析对象",scopedSlots:{customRender:"objectId"}},{dataIndex:"ename",title:"频道英文名"},{dataIndex:"description",title:"频道描述"},{dataIndex:"creator",title:"创建者"},{dataIndex:"gmtCreate",title:"创建时间",scopedSlots:{customRender:"gmtCreate"}},{dataIndex:"gmtModified",title:"最近更新时间",scopedSlots:{customRender:"gmtModified"}},{dataIndex:"action",title:"操作",scopedSlots:{customRender:"action"}}],channelData:[],channelVisible:!1,content:{id:null,objectId:null,cname:"",ename:"",description:"",creator:"",gmtCreate:"",gmtModified:""},optType:0,pageParam:{page:1,size:20},searchInput:"",total:0,that:this,cloneVisible:!1,cloneForm:{cname:"",ename:"",description:"",creator:"",createTime:"",updateTime:""},cloneFormRule:{cname:[{required:!0,message:"请输入频道名称"}],ename:[{required:!0,message:"请输入频道别名"}],objectId:[{required:!0,message:"请选择分析对象"}]},cloneData:{},objectNameData:[]}},created:function(){this.getchannel(),this.getObjectData(),this.getObject()},watch:{objectData:{handler:function(e){this.objectNameData=e,this.getchannel()},deep:!0}},methods:{getchannel:function(){var e=this;this.$API.searchChannel(this.pageParam).then((function(t){1e3===t.code?(e.channelData=t.data,e.total=t.total):e.channelData=[]}))},getObject:function(){var e=this,t={};this.$API.searchObject(t).then((function(t){1e3===t.code?e.objectNameData=t.data:e.objectNameData=[]}))},optchannel:function(){this.resetContent(),this.channelVisible=!0,this.optType=0},editchannel:function(e){this.content=e,this.optType=1,this.channelVisible=!0},deletechannel:function(e){var t=this.$createElement,a=this;this.$confirm({title:"确定删除该条数据吗？",content:function(){return t("div",{style:"color:red"},["删除后将不可恢复"])},okText:"确认删除",cancelText:"取消删除",onOk:function(){a.$API.delChannel(e.id).then((function(e){1e3===e.code?(a.$message.success("删除成功"),a.getObjectData()):a.$message.warning(e.message)}))}})},openField:function(e,t){this.curRow=t,this.$router.push({name:"field",query:{id:t.id,cname:t.cname}})},channelOk:function(e){var t=this;if(e.optType){var a=Object.assign({},e.formContent,{id:this.content.id});this.$API.editChannel(a).then((function(e){1e3===e.code?(console.log(3333),t.$message.success("频道更新成功"),t.channelVisible=!1,t.getObjectData()):t.$message.warning(e.message)}))}else this.$API.addChannel(e.formContent).then((function(e){1e3===e.code?(t.$message.success("添加频道成功"),t.channelVisible=!1,t.getObjectData()):t.$message.warning(e.message)}))},channelCancel:function(){this.channelVisible=!1,this.resetContent()},pageChange:function(){this.getchannel()},keywordChange:function(){this.pageParam.page=1,this.getchannel()},cloneChannel:function(e,t){this.cloneData=t,this.cloneVisible=!0},cloneCancel:function(){this.cloneVisible=!1},cloneOk:function(){var e=this;this.$refs.cloneForm.validate((function(t){if(!t)return e.$message.warning("输入有误，请检查"),!1;var a=Object.assign({},e.cloneForm,{channelId:e.cloneData.id});e.$API.cloneChannel(a).then((function(t){1e3===t.code?(e.$message.success(t.message),e.getObjectData()):e.$message.warning(t.message)})),e.cloneVisible=!1}))},resetContent:function(){this.content={id:"",objectId:"",cname:"",ename:"",description:"",creator:"",gmtCreate:"",gmtModified:""}},getObjectData:function(){console.log(111),this.$store.dispatch("getObjectData",this)}}},f=h,b=(a("a875"),Object(m["a"])(f,n,c,!1,null,null,null));t["default"]=b.exports},a875:function(e,t,a){"use strict";var n=a("34cc"),c=a.n(n);c.a},a9e3:function(e,t,a){"use strict";var n=a("83ab"),c=a("da84"),o=a("94ca"),l=a("6eeb"),s=a("5135"),i=a("c6b6"),r=a("7156"),d=a("c04e"),m=a("d039"),p=a("7c73"),u=a("241c").f,h=a("06cf").f,f=a("9bf2").f,b=a("58a8").trim,g="Number",x=c[g],y=x.prototype,j=i(p(y))==g,v=function(e){var t,a,n,c,o,l,s,i,r=d(e,!1);if("string"==typeof r&&r.length>2)if(r=b(r),t=r.charCodeAt(0),43===t||45===t){if(a=r.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(r.charCodeAt(1)){case 66:case 98:n=2,c=49;break;case 79:case 111:n=8,c=55;break;default:return+r}for(o=r.slice(2),l=o.length,s=0;s<l;s++)if(i=o.charCodeAt(s),i<48||i>c)return NaN;return parseInt(o,n)}return+r};if(o(g,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var C,I=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof I&&(j?m((function(){y.valueOf.call(a)})):i(a)!=g)?r(new x(v(t)),a,I):v(t)},F=n?u(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;F.length>_;_++)s(x,C=F[_])&&!s(I,C)&&f(I,C,h(x,C));I.prototype=y,y.constructor=I,l(c,g,I)}}}]);
//# sourceMappingURL=chunk-fd4a0516.37783e13.js.map