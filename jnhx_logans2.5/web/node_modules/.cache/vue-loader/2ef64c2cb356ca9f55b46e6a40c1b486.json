{"remainingRequest":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hx_ygg/job/hx_logana3.0/web/src/components/mytable/my-table.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/hx_ygg/job/hx_logana3.0/web/src/components/mytable/my-table.vue","mtime":1631238422157},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50b29sIHsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAudG9vbF9sZWZ0IGJ1dHRvbiB7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7CiAgICB9CiAgICAudG9vbF9yaWdodCB7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NlY2VjZTsKICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgYSB7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweCAxMnB4OwogICAgICAgICAgICBjb2xvcjogIzQ0NDsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjY2VjZWNlOwogICAgICAgICAgICBpIHsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJiA+IGE6aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOwogICAgICAgIH0KICAgICAgICAuaXZ1LWNoZWNrYm94LXdyYXBwZXIgewogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIH0KICAgIH0KfQoubGlzdF90b3AgewogICAgLnRpdGxlIHsKICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICBjb2xvcjogIzMzMzsKICAgIH0KICAgIC5jb250ZW50IHsKICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICB9Cn0KLmxpc3RfYm90dG9tIHsKICAgIHAgewogICAgICAgIG1hcmdpbi1yaWdodDogMzBweDsKICAgICAgICAudGl0bGUgewogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgIH0KICAgICAgICAuY29udGVudCB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CiAgICB9Cn0KLnBhZ2UgewogICAgbWFyZ2luLXRvcDogMjBweDsKfQojdGFibGVfbWFpbiB7CiAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgLml2dS1pY29uIHsKICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgfQp9Cg=="},{"version":3,"sources":["my-table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"my-table.vue","sourceRoot":"src/components/mytable","sourcesContent":["<template>\n    <div class=\"my-table\">\n        <div class=\"tool clearfix\">\n            <div class=\"tool_left fl\">\n                <slot name=\"buttons\"></slot>\n            </div>\n            <div class=\"tool_right fr\">\n                <a\n                    title=\"收藏（加入书签）\"\n                    @click=\"goCollect\"\n                    v-if=\"hasTool('collect')\"\n                >\n                    <Icon type=\"md-star-outline\" />\n                </a>\n                <a title=\"导出\" @click=\"goDownload\" v-if=\"hasTool('export')\">\n                    <Icon type=\"md-download\" />\n                </a>\n                <a\n                    title=\"开启/隐藏查询\"\n                    @click=\"goHidden\"\n                    v-if=\"hasTool('hidden')\"\n                >\n                    <Icon type=\"md-search\" />\n                </a>\n                <!-- <a title=\"刷新数据\" v-if=\"hasTool('refresh')\">\n                    <Icon type=\"md-sync\" />\n                </a> -->\n                <a\n                    title=\"表格/列表视图\"\n                    @click=\"changeViewModel\"\n                    v-if=\"hasTool('mode')\"\n                >\n                    <Icon type=\"md-list-box\" />\n                </a>\n                <Dropdown\n                    placement=\"bottom-end\"\n                    trigger=\"custom\"\n                    :visible=\"visible\"\n                    stop-propagation\n                    @on-clickoutside=\"columnOpt\"\n                >\n                    <a href=\"javascript:void(0)\" title=\"列\" @click=\"columnOpt\">\n                        <Icon type=\"md-keypad\" />\n                    </a>\n                    <DropdownMenu slot=\"list\">\n                        <CheckboxGroup\n                            :value=\"checkedKeys\"\n                            @on-change=\"checkChange\"\n                        >\n                            <template v-for=\"field in controlFields\">\n                                <DropdownItem :key=\"field.key\">\n                                    <Checkbox :label=\"field.key\">\n                                        {{ field.title }}\n                                    </Checkbox>\n                                </DropdownItem>\n                            </template>\n                        </CheckboxGroup>\n                    </DropdownMenu>\n                </Dropdown>\n            </div>\n        </div>\n        <div id=\"table_main\">\n            <Table\n                :columns=\"realFields\"\n                :data=\"realData\"\n                size=\"small\"\n                row-key=\"id\"\n                :loading=\"tableLoading\"\n                v-if=\"viewModel === 'table'\"\n            >\n                <template\n                    v-for=\"name in slotsColumn\"\n                    slot-scope=\"{ row }\"\n                    :slot=\"name.slot\"\n                >\n                    <slot :name=\"name.slot\" :row=\"row\"></slot>\n                </template>\n            </Table>\n            <List border v-if=\"viewModel === 'list'\">\n                <ListItem v-for=\"(list, index) in data\" :key=\"index\">\n                    <div>\n                        <div class=\"list_top\">\n                            <span class=\"title\">原始日志：</span>\n                            <span class=\"content\">{{ list.sourcelog }}</span>\n                        </div>\n                        <div class=\"list_bottom clearfix\">\n                            <p\n                                class=\"fl\"\n                                v-for=\"field in allFields\"\n                                :key=\"field.key\"\n                            >\n                                <span class=\"title\">{{ field.title }}:</span>\n                                <span class=\"content\">\n                                    {{ list[field.key] || '-' }}\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n                </ListItem>\n                <Spin size=\"large\" fix v-if=\"tableLoading\"></Spin>\n            </List>\n        </div>\n        <div class=\"page clearfix\">\n            <!-- <div class=\"fl\" v-if=\"frontPage\">\n                <Page\n                    :total=\"total\"\n                    size=\"small\"\n                    show-total\n                />\n            </div> -->\n            <div class=\"fl\">\n                <simple-page :total=\"total\" :page=\"page\" @page-change=\"pageChange\"></simple-page>\n            </div>\n            <div class=\"fr\">\n                <slot name=\"elapsedTime\"></slot>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport simplePage from '../simple-page/simple-page.vue';\nexport default {\n\tcomponents: { simplePage },\n    name: 'my-table',\n    props: {\n        data: [],\n        column: [],\n        tools: {\n            type: Array,\n            default() {\n                return ['collect', 'hidden', 'refresh', 'mode', 'export'];\n            },\n        },\n        total: {\n            type: Number,\n            default(){\n                return 0;\n            }\n        },\n        page: {\n            type: Number,\n            default(){\n                return 1;\n            }\n        },\n        tableLoading: {\n            type: Boolean,\n            default(){\n                return false;\n            }\n        },\n        frontPage: {\n            type: Boolean,\n            default(){\n                return false;\n            }\n        }\n    },\n    data() {\n        return {\n            visible: false,\n            allFields: [], // 给list视图所用\n            realFields: [], // 真正的表头\n            checkFields: [], // 选中的字段列表\n            viewModel: 'table',\n            slotsColumn: [],\n        };\n    },\n    methods: {\n        hasTool(name) {\n            return this.tools.includes(name);\n        },\n        columnOpt() {\n            this.visible = !this.visible;\n        },\n        checkChange(val) {\n            this.realFields = this.column.filter((list) =>\n                val.includes(list.key)\n            );\n        },\n        goCollect() {\n            this.$emit('goCollect');\n        },\n        goHidden() {\n            this.$emit('goHidden');\n        },\n        changeViewModel() {\n            if (this.viewModel === 'list') {\n                this.viewModel = 'table';\n            } else {\n                this.viewModel = 'list';\n            }\n            this.$emit('changeViewModel', this.viewModel);\n        },\n        pageChange(page){\n            this.$emit('page-change',page);\n        },\n        goDownload(){\n            this.$emit(\"download\");\n        }\n    },\n    watch: {\n        column: {\n            handler: function (val) {\n                this.allFields = val;\n                this.realFields = val;\n                this.checkFields = this.controlFields;\n                this.slotsColumn = val.filter((list) =>\n                    Object.prototype.hasOwnProperty.call(list, 'slot')\n                );\n            },\n        }\n    },\n    computed: {\n        // checkbox keys集合\n        checkedKeys() {\n            return this.checkFields.map((list) => list.key);\n        },\n        // 下拉控制字段（做出筛选）\n        controlFields() {\n            return this.column.filter((list) => !list.type);\n        },\n        realData(){\n            if(this.frontPage){\n                return this.data.slice((this.page - 1) * 10,this.page * 10);\n            } else {\n                return this.data;\n            }\n        }\n    },\n    mounted() {\n        // 默认初始化的选择状态\n        this.realFields = this.column;\n        this.checkFields = this.controlFields;\n        this.slotsColumn = this.column.filter((list) =>\n            Object.prototype.hasOwnProperty.call(list, 'slot')\n        );\n    },\n};\n</script>\n<style lang=\"scss\">\n.tool {\n    margin-bottom: 10px;\n    .tool_left button {\n        margin-right: 4px;\n    }\n    .tool_right {\n        border: 1px solid #cecece;\n        border-radius: 4px;\n        a {\n            padding: 6px 12px;\n            color: #444;\n            display: inline-block;\n            border-right: 1px solid #cecece;\n            i {\n                font-size: 16px;\n                font-weight: 700;\n            }\n        }\n        & > a:hover {\n            background-color: #eee;\n        }\n        .ivu-checkbox-wrapper {\n            font-size: 13px;\n            width: 100%;\n        }\n    }\n}\n.list_top {\n    .title {\n        font-weight: 700;\n        font-size: 12px;\n        color: #333;\n    }\n    .content {\n        font-size: 12px;\n    }\n}\n.list_bottom {\n    p {\n        margin-right: 30px;\n        .title {\n            font-weight: 700;\n            font-size: 12px;\n            color: #333;\n        }\n        .content {\n            font-size: 12px;\n        }\n    }\n}\n.page {\n    margin-top: 20px;\n}\n#table_main {\n    overflow-y: auto;\n    .ivu-icon {\n        font-weight: 700;\n    }\n}\n</style>\n"]}]}