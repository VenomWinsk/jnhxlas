{"remainingRequest":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hx_ygg/job/hx_logana3.0/web/src/components/mytable/my-table.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hx_ygg/job/hx_logana3.0/web/src/components/mytable/my-table.vue","mtime":1631238422157},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzaW1wbGVQYWdlIGZyb20gJy4uL3NpbXBsZS1wYWdlL3NpbXBsZS1wYWdlLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKCWNvbXBvbmVudHM6IHsgc2ltcGxlUGFnZSB9LAogICAgbmFtZTogJ215LXRhYmxlJywKICAgIHByb3BzOiB7CiAgICAgICAgZGF0YTogW10sCiAgICAgICAgY29sdW1uOiBbXSwKICAgICAgICB0b29sczogewogICAgICAgICAgICB0eXBlOiBBcnJheSwKICAgICAgICAgICAgZGVmYXVsdCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbJ2NvbGxlY3QnLCAnaGlkZGVuJywgJ3JlZnJlc2gnLCAnbW9kZScsICdleHBvcnQnXTsKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHRvdGFsOiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdCgpewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHBhZ2U6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICBkZWZhdWx0KCl7CiAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdGFibGVMb2FkaW5nOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQoKXsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZnJvbnRQYWdlOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQoKXsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICAgICAgICBhbGxGaWVsZHM6IFtdLCAvLyDnu5lsaXN06KeG5Zu+5omA55SoCiAgICAgICAgICAgIHJlYWxGaWVsZHM6IFtdLCAvLyDnnJ/mraPnmoTooajlpLQKICAgICAgICAgICAgY2hlY2tGaWVsZHM6IFtdLCAvLyDpgInkuK3nmoTlrZfmrrXliJfooagKICAgICAgICAgICAgdmlld01vZGVsOiAndGFibGUnLAogICAgICAgICAgICBzbG90c0NvbHVtbjogW10sCiAgICAgICAgfTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaGFzVG9vbChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvb2xzLmluY2x1ZGVzKG5hbWUpOwogICAgICAgIH0sCiAgICAgICAgY29sdW1uT3B0KCkgewogICAgICAgICAgICB0aGlzLnZpc2libGUgPSAhdGhpcy52aXNpYmxlOwogICAgICAgIH0sCiAgICAgICAgY2hlY2tDaGFuZ2UodmFsKSB7CiAgICAgICAgICAgIHRoaXMucmVhbEZpZWxkcyA9IHRoaXMuY29sdW1uLmZpbHRlcigobGlzdCkgPT4KICAgICAgICAgICAgICAgIHZhbC5pbmNsdWRlcyhsaXN0LmtleSkKICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIGdvQ29sbGVjdCgpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ29Db2xsZWN0Jyk7CiAgICAgICAgfSwKICAgICAgICBnb0hpZGRlbigpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ29IaWRkZW4nKTsKICAgICAgICB9LAogICAgICAgIGNoYW5nZVZpZXdNb2RlbCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGVsID09PSAnbGlzdCcpIHsKICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsID0gJ3RhYmxlJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsID0gJ2xpc3QnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZVZpZXdNb2RlbCcsIHRoaXMudmlld01vZGVsKTsKICAgICAgICB9LAogICAgICAgIHBhZ2VDaGFuZ2UocGFnZSl7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3BhZ2UtY2hhbmdlJyxwYWdlKTsKICAgICAgICB9LAogICAgICAgIGdvRG93bmxvYWQoKXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiZG93bmxvYWQiKTsKICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBjb2x1bW46IHsKICAgICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICAgICAgdGhpcy5hbGxGaWVsZHMgPSB2YWw7CiAgICAgICAgICAgICAgICB0aGlzLnJlYWxGaWVsZHMgPSB2YWw7CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRmllbGRzID0gdGhpcy5jb250cm9sRmllbGRzOwogICAgICAgICAgICAgICAgdGhpcy5zbG90c0NvbHVtbiA9IHZhbC5maWx0ZXIoKGxpc3QpID0+CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGxpc3QsICdzbG90JykKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0sCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLy8gY2hlY2tib3gga2V5c+mbhuWQiAogICAgICAgIGNoZWNrZWRLZXlzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja0ZpZWxkcy5tYXAoKGxpc3QpID0+IGxpc3Qua2V5KTsKICAgICAgICB9LAogICAgICAgIC8vIOS4i+aLieaOp+WItuWtl+aute+8iOWBmuWHuuetm+mAie+8iQogICAgICAgIGNvbnRyb2xGaWVsZHMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbHVtbi5maWx0ZXIoKGxpc3QpID0+ICFsaXN0LnR5cGUpOwogICAgICAgIH0sCiAgICAgICAgcmVhbERhdGEoKXsKICAgICAgICAgICAgaWYodGhpcy5mcm9udFBhZ2UpewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zbGljZSgodGhpcy5wYWdlIC0gMSkgKiAxMCx0aGlzLnBhZ2UgKiAxMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgLy8g6buY6K6k5Yid5aeL5YyW55qE6YCJ5oup54q25oCBCiAgICAgICAgdGhpcy5yZWFsRmllbGRzID0gdGhpcy5jb2x1bW47CiAgICAgICAgdGhpcy5jaGVja0ZpZWxkcyA9IHRoaXMuY29udHJvbEZpZWxkczsKICAgICAgICB0aGlzLnNsb3RzQ29sdW1uID0gdGhpcy5jb2x1bW4uZmlsdGVyKChsaXN0KSA9PgogICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobGlzdCwgJ3Nsb3QnKQogICAgICAgICk7CiAgICB9LAp9Owo="},{"version":3,"sources":["my-table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"my-table.vue","sourceRoot":"src/components/mytable","sourcesContent":["<template>\n    <div class=\"my-table\">\n        <div class=\"tool clearfix\">\n            <div class=\"tool_left fl\">\n                <slot name=\"buttons\"></slot>\n            </div>\n            <div class=\"tool_right fr\">\n                <a\n                    title=\"收藏（加入书签）\"\n                    @click=\"goCollect\"\n                    v-if=\"hasTool('collect')\"\n                >\n                    <Icon type=\"md-star-outline\" />\n                </a>\n                <a title=\"导出\" @click=\"goDownload\" v-if=\"hasTool('export')\">\n                    <Icon type=\"md-download\" />\n                </a>\n                <a\n                    title=\"开启/隐藏查询\"\n                    @click=\"goHidden\"\n                    v-if=\"hasTool('hidden')\"\n                >\n                    <Icon type=\"md-search\" />\n                </a>\n                <!-- <a title=\"刷新数据\" v-if=\"hasTool('refresh')\">\n                    <Icon type=\"md-sync\" />\n                </a> -->\n                <a\n                    title=\"表格/列表视图\"\n                    @click=\"changeViewModel\"\n                    v-if=\"hasTool('mode')\"\n                >\n                    <Icon type=\"md-list-box\" />\n                </a>\n                <Dropdown\n                    placement=\"bottom-end\"\n                    trigger=\"custom\"\n                    :visible=\"visible\"\n                    stop-propagation\n                    @on-clickoutside=\"columnOpt\"\n                >\n                    <a href=\"javascript:void(0)\" title=\"列\" @click=\"columnOpt\">\n                        <Icon type=\"md-keypad\" />\n                    </a>\n                    <DropdownMenu slot=\"list\">\n                        <CheckboxGroup\n                            :value=\"checkedKeys\"\n                            @on-change=\"checkChange\"\n                        >\n                            <template v-for=\"field in controlFields\">\n                                <DropdownItem :key=\"field.key\">\n                                    <Checkbox :label=\"field.key\">\n                                        {{ field.title }}\n                                    </Checkbox>\n                                </DropdownItem>\n                            </template>\n                        </CheckboxGroup>\n                    </DropdownMenu>\n                </Dropdown>\n            </div>\n        </div>\n        <div id=\"table_main\">\n            <Table\n                :columns=\"realFields\"\n                :data=\"realData\"\n                size=\"small\"\n                row-key=\"id\"\n                :loading=\"tableLoading\"\n                v-if=\"viewModel === 'table'\"\n            >\n                <template\n                    v-for=\"name in slotsColumn\"\n                    slot-scope=\"{ row }\"\n                    :slot=\"name.slot\"\n                >\n                    <slot :name=\"name.slot\" :row=\"row\"></slot>\n                </template>\n            </Table>\n            <List border v-if=\"viewModel === 'list'\">\n                <ListItem v-for=\"(list, index) in data\" :key=\"index\">\n                    <div>\n                        <div class=\"list_top\">\n                            <span class=\"title\">原始日志：</span>\n                            <span class=\"content\">{{ list.sourcelog }}</span>\n                        </div>\n                        <div class=\"list_bottom clearfix\">\n                            <p\n                                class=\"fl\"\n                                v-for=\"field in allFields\"\n                                :key=\"field.key\"\n                            >\n                                <span class=\"title\">{{ field.title }}:</span>\n                                <span class=\"content\">\n                                    {{ list[field.key] || '-' }}\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n                </ListItem>\n                <Spin size=\"large\" fix v-if=\"tableLoading\"></Spin>\n            </List>\n        </div>\n        <div class=\"page clearfix\">\n            <!-- <div class=\"fl\" v-if=\"frontPage\">\n                <Page\n                    :total=\"total\"\n                    size=\"small\"\n                    show-total\n                />\n            </div> -->\n            <div class=\"fl\">\n                <simple-page :total=\"total\" :page=\"page\" @page-change=\"pageChange\"></simple-page>\n            </div>\n            <div class=\"fr\">\n                <slot name=\"elapsedTime\"></slot>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport simplePage from '../simple-page/simple-page.vue';\nexport default {\n\tcomponents: { simplePage },\n    name: 'my-table',\n    props: {\n        data: [],\n        column: [],\n        tools: {\n            type: Array,\n            default() {\n                return ['collect', 'hidden', 'refresh', 'mode', 'export'];\n            },\n        },\n        total: {\n            type: Number,\n            default(){\n                return 0;\n            }\n        },\n        page: {\n            type: Number,\n            default(){\n                return 1;\n            }\n        },\n        tableLoading: {\n            type: Boolean,\n            default(){\n                return false;\n            }\n        },\n        frontPage: {\n            type: Boolean,\n            default(){\n                return false;\n            }\n        }\n    },\n    data() {\n        return {\n            visible: false,\n            allFields: [], // 给list视图所用\n            realFields: [], // 真正的表头\n            checkFields: [], // 选中的字段列表\n            viewModel: 'table',\n            slotsColumn: [],\n        };\n    },\n    methods: {\n        hasTool(name) {\n            return this.tools.includes(name);\n        },\n        columnOpt() {\n            this.visible = !this.visible;\n        },\n        checkChange(val) {\n            this.realFields = this.column.filter((list) =>\n                val.includes(list.key)\n            );\n        },\n        goCollect() {\n            this.$emit('goCollect');\n        },\n        goHidden() {\n            this.$emit('goHidden');\n        },\n        changeViewModel() {\n            if (this.viewModel === 'list') {\n                this.viewModel = 'table';\n            } else {\n                this.viewModel = 'list';\n            }\n            this.$emit('changeViewModel', this.viewModel);\n        },\n        pageChange(page){\n            this.$emit('page-change',page);\n        },\n        goDownload(){\n            this.$emit(\"download\");\n        }\n    },\n    watch: {\n        column: {\n            handler: function (val) {\n                this.allFields = val;\n                this.realFields = val;\n                this.checkFields = this.controlFields;\n                this.slotsColumn = val.filter((list) =>\n                    Object.prototype.hasOwnProperty.call(list, 'slot')\n                );\n            },\n        }\n    },\n    computed: {\n        // checkbox keys集合\n        checkedKeys() {\n            return this.checkFields.map((list) => list.key);\n        },\n        // 下拉控制字段（做出筛选）\n        controlFields() {\n            return this.column.filter((list) => !list.type);\n        },\n        realData(){\n            if(this.frontPage){\n                return this.data.slice((this.page - 1) * 10,this.page * 10);\n            } else {\n                return this.data;\n            }\n        }\n    },\n    mounted() {\n        // 默认初始化的选择状态\n        this.realFields = this.column;\n        this.checkFields = this.controlFields;\n        this.slotsColumn = this.column.filter((list) =>\n            Object.prototype.hasOwnProperty.call(list, 'slot')\n        );\n    },\n};\n</script>\n<style lang=\"scss\">\n.tool {\n    margin-bottom: 10px;\n    .tool_left button {\n        margin-right: 4px;\n    }\n    .tool_right {\n        border: 1px solid #cecece;\n        border-radius: 4px;\n        a {\n            padding: 6px 12px;\n            color: #444;\n            display: inline-block;\n            border-right: 1px solid #cecece;\n            i {\n                font-size: 16px;\n                font-weight: 700;\n            }\n        }\n        & > a:hover {\n            background-color: #eee;\n        }\n        .ivu-checkbox-wrapper {\n            font-size: 13px;\n            width: 100%;\n        }\n    }\n}\n.list_top {\n    .title {\n        font-weight: 700;\n        font-size: 12px;\n        color: #333;\n    }\n    .content {\n        font-size: 12px;\n    }\n}\n.list_bottom {\n    p {\n        margin-right: 30px;\n        .title {\n            font-weight: 700;\n            font-size: 12px;\n            color: #333;\n        }\n        .content {\n            font-size: 12px;\n        }\n    }\n}\n.page {\n    margin-top: 20px;\n}\n#table_main {\n    overflow-y: auto;\n    .ivu-icon {\n        font-weight: 700;\n    }\n}\n</style>\n"]}]}