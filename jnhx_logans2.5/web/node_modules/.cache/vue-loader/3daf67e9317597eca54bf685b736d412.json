{"remainingRequest":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hx_ygg/job/hx_logana3.0/web/src/views/collect/inTask/in-task.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hx_ygg/job/hx_logana3.0/web/src/views/collect/inTask/in-task.vue","mtime":1631238422177},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBteVRhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9teXRhYmxlL215LXRhYmxlLnZ1ZSc7CmltcG9ydCB7IGdldFByb2Nlc3MsIGNyZWF0ZVBybywgdmFsaWRhdGVQYXRoLCBkZWxQcm9jZXNzIH0gZnJvbSAnQC9hcGkvY29sbGVjdCc7CmltcG9ydCB7IGdldFVuaXQgfSBmcm9tICdAL2FwaS9zZXR0aW5nJzsKaW1wb3J0IHsgcHJvalN0YXR1cyB9IGZyb20gJy4vc3RhdHVzJzsKaW1wb3J0IEV4cGFuZFJvdyBmcm9tICcuL2V4cGFuZFJvdy52dWUnOwpleHBvcnQgZGVmYXVsdCB7Cgljb21wb25lbnRzOiB7IG15VGFibGUsIEV4cGFuZFJvdyB9LAoJbmFtZTogJ2luLXRhc2snLAoJZGF0YSgpIHsKCQljb25zdCB2YWxpZGF0ZUZvbGRlcnMgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CgkJCWlmICghdmFsdWUpIHsKCQkJCXJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+aWh+S7tui3r+W+hOS4jeW+l+S4uuepuu+8gScpKTsKCQkJfQoJCQkvLyDmqKHmi5/lvILmraXpqozor4HmlYjmnpwKCQkJLy8gc2V0VGltZW91dCgoKSA9PiB7CgkJCS8vIAlpZiAodmFsdWUgPT09ICdhL2IvYycpIHsKCQkJLy8gCQljYWxsYmFjaygpOwoJCQkvLyAJCXRoaXMuZm9sZGVyU3VjY2VzcyA9IHRydWU7CgkJCS8vIAl9IGVsc2UgewoJCQkvLyAJCWNhbGxiYWNrKG5ldyBFcnJvcign5paH5Lu26Lev5b6E5qOA5rWL5LiN5Yiw77yBJykpOwoJCQkvLyAJfQogICAgICAgICAgICAvLyB9LCAxMDAwKTsKICAgICAgICAgICAgdmFsaWRhdGVQYXRoKHZhbHVlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZighIXJlcyl7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKCQkJCQl0aGlzLmZvbGRlclN1Y2Nlc3MgPSB0cnVlOwoJCQkJfSBlbHNlIHsKCQkJCQljYWxsYmFjayhuZXcgRXJyb3IoJ+aWh+S7tui3r+W+hOS4jeWtmOWcqO+8gScpKTsKCQkJCX0KICAgICAgICAgICAgfSkKCQl9OwoJCXJldHVybiB7CgkJCXRhYmxlQ29uZmlnOiB7CgkJCQlkYXRhOiBbXSwKCQkJCWNvbHVtbjogWwoJCQkJCXsKCQkJCQkJa2V5OiAncHJvX25hbWUnLAoJCQkJCQl0aXRsZTogJ+S7u+WKoeWQjeensCcsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWtleTogJ3VuaXRfaWQnLAoJCQkJCQl0aXRsZTogJ+aJgOWxnuWNleS9jScsCgkJCQkJCXNsb3Q6ICd1bml0X2lkJywKCQkJCQl9LAoJCQkJCXsKCQkJCQkJa2V5OiAncHJvX3N0YXR1cycsCgkJCQkJCXRpdGxlOiAn5Lu75Yqh54q25oCBJywKCQkJCQkJc2xvdDogJ3Byb19zdGF0dXMnLAoJCQkJCX0sCgkJCQkJewoJCQkJCQlrZXk6ICdkYXRhX3BhdGgnLAoJCQkJCQl0aXRsZTogJ+aWh+S7tui3r+W+hCcsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWtleTogJ3Byb19kZXNjcmlwdGlvbicsCgkJCQkJCXRpdGxlOiAn5Lu75Yqh5o+P6L+wJywKCQkJCQl9LAoJCQkJCXsKCQkJCQkJdGl0bGU6ICfmk43kvZwnLAoJCQkJCQlzbG90OiAnYWN0aW9uJywKCQkJCQkJa2V5OiAnYWN0aW9uJywKCQkJCQl9LAoJCQkJXSwKCQkJCXRvb2xzOiBbXSwKCQkJCXBhZ2U6MQoJCQl9LAoJCQlwcm9qZWN0VmlzaWJsZTogZmFsc2UsCgkJCWluUGFyYW06IHsKCQkJCXByb19uYW1lOiAnJywKCQkJCWRhdGFfcGF0aDogJycsCgkJCQl1bml0OiBudWxsLAoJCQkJcHJvX2Rlc2NyaXB0aW9uOiAnJywKCQkJfSwKCQkJaW5QYXJhbVJ1bGU6IHsKCQkJCXByb19uYW1lOiBbCgkJCQkJewoJCQkJCQlyZXF1aXJlZDogdHJ1ZSwKCQkJCQkJbWVzc2FnZTogJ+ivt+i+k+WFpemhueebruS7u+WKoeWQjeensCcsCgkJCQkJCXRyaWdnZXI6ICdibHVyJywKCQkJCQl9LAoJCQkJXSwKCQkJCWRhdGFfcGF0aDogWwoJCQkJCXsKCQkJCQkJdmFsaWRhdG9yOiB2YWxpZGF0ZUZvbGRlcnMsCgkJCQkJCXJlcXVpcmVkOiB0cnVlLAoJCQkJCQl0cmlnZ2VyOiAnYmx1cicsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCWZvbGRlclN1Y2Nlc3M6IGZhbHNlLAoJCQltb2RlOiAwLAoJCQljdXJyZW50RGF0YToge30sCgkJCXVuaXREYXRhOiBbXSwKCQkJcHJvalN0YXR1cywKCQl9OwoJfSwKCW1vdW50ZWQoKSB7CgkJdGhpcy5nZXRVbml0KCk7CgkJdGhpcy5nZXRQcm9jZXNzKCk7Cgl9LAoJY29tcHV0ZWQ6IHsKCQlnZXRVbml0QnlJZCgpIHsKCQkJcmV0dXJuIGZ1bmN0aW9uIChpZCkgewoJCQkJcmV0dXJuIHRoaXMudW5pdERhdGEuZmluZCgobGlzdCkgPT4gbGlzdC51bml0X2lkID09PSBpZCkKCQkJCQkudW5pdF9uYW1lOwoJCQl9OwoJCX0sCgkJZ2V0U3RhdHVzQnlDb2RlKCkgewoJCQlyZXR1cm4gZnVuY3Rpb24gKGNvZGUpIHsKCQkJCXJldHVybiB0aGlzLnByb2pTdGF0dXMuZmluZCgobGlzdCkgPT4gbGlzdC5jb2RlID09PSBjb2RlKQoJCQkJCS5zdGF0dXM7CgkJCX07CgkJfSwKCX0sCgltZXRob2RzOiB7CgkJLy8g6I635Y+W5omA5pyJ5Y2V5L2N5pWw5o2uCgkJZ2V0VW5pdCgpIHsKCQkJZ2V0VW5pdCgpLnRoZW4oKHJlcykgPT4gewoJCQkJdGhpcy51bml0RGF0YSA9IHJlczsKCQkJfSk7CgkJfSwKCQkvLyDojrflj5bmiYDmnInku7vliqHkv6Hmga8KCQlnZXRQcm9jZXNzKCkgewoJCQlnZXRQcm9jZXNzKCkudGhlbigocmVzKSA9PiB7CgkJCQl0aGlzLnRhYmxlQ29uZmlnLmRhdGEgPSByZXM7CgkJCX0pOwoJCX0sCgkJZGVsKHJvdykgewogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgICAgICAgdGl0bGU6J+aYr+WQpuWIoOmZpOivpeadoeaVsOaNricsCiAgICAgICAgICAgICAgICBvbk9rOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgZGVsUHJvY2Vzcyhyb3cucHJvX2lkKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kTWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXRQcm9jZXNzKCk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKCQl9LAoJCWNhbmNlbCgpIHsKCQkJdGhpcy5wcm9qZWN0VmlzaWJsZSA9IGZhbHNlOwoJCQl0aGlzLmZvbGRlclN1Y2Nlc3MgPSBmYWxzZTsKCQkJdGhpcy5yZXNldEZvcm0oKTsKCQl9LAoJCXJlc2V0Rm9ybSgpIHsKCQkJdGhpcy5pblBhcmFtID0gewoJCQkJcHJvX25hbWU6ICcnLAoJCQkJZGF0YV9wYXRoOiAnJywKCQkJCXVuaXRfaWQ6IG51bGwsCgkJCQlwcm9fZGVzY3JpcHRpb246ICcnLAoJCQl9OwoJCX0sCgkJdG9EZXRhaWwocm93KSB7CgkJCXRoaXMuY3VycmVudERhdGEgPSBPYmplY3QuYXNzaWduKAoJCQkJe30sCgkJCQlyb3csCgkJCQl7IHVuaXRfbmFtZTogdGhpcy5nZXRVbml0QnlJZChyb3cudW5pdCkgfSwKCQkJCXsgc3RhdHVzU3RyOiB0aGlzLmdldFN0YXR1c0J5Q29kZShyb3cucHJvX3N0YXR1cykgfQoJCQkpOwoJCQl0aGlzLm1vZGUgPSAxOwogICAgICAgIH0sCiAgICAgICAgLy8g5qCh6aqMCiAgICAgICAgdmFsaWRhdG9yUGF0aChwYXRoKXsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgdmFsaWRhdGVQYXRoKHBhdGgpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9LAoJCWJhY2soKSB7CiAgICAgICAgICAgIHRoaXMubW9kZSA9IDA7CiAgICAgICAgICAgIHRoaXMuZ2V0VW5pdCgpOwoJCSAgICB0aGlzLmdldFByb2Nlc3MoKTsKCQl9LAoJCXNhdmUoKXsKICAgICAgICAgICAgdGhpcy4kcmVmc1snaW5QYXJhbSddLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgICAgICAgaWYodmFsaWQpewogICAgICAgICAgICAgICAgICAgIGNyZWF0ZVBybyh0aGlzLmluUGFyYW0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFByb2Nlc3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9qZWN0VmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn5qCh6aqM6L6T5YWl5pyJ6K+vJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHN0YXR1c0NoYW5nZShkYXRhKXsKICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IE9iamVjdC5hc3NpZ24oCgkJCQl7fSwKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGEsCiAgICAgICAgICAgICAgICBkYXRhLAoJCQkJeyB1bml0X25hbWU6IHRoaXMuZ2V0VW5pdEJ5SWQoZGF0YS51bml0KSB9LAoJCQkJeyBzdGF0dXNTdHI6IHRoaXMuZ2V0U3RhdHVzQnlDb2RlKGRhdGEucHJvX3N0YXR1cykgfQoJCQkpOwogICAgICAgIH0sCgkJYXN5bmMgcGFnZUNoYW5nZShwYWdlKSB7CgkJCXRoaXMudGFibGVDb25maWcucGFnZSA9IHBhZ2U7CgkJfSwKCX0sCn07Cg=="},{"version":3,"sources":["in-task.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"in-task.vue","sourceRoot":"src/views/collect/inTask","sourcesContent":["<template>\n\t<div class=\"in_task\">\n\t\t<Card>\n\t\t\t<my-table\n\t\t\t\t:column=\"tableConfig.column\"\n\t\t\t\t:data=\"tableConfig.data\"\n\t\t\t\t:tools=\"tableConfig.tools\"\n\t\t\t\t:page=\"tableConfig.page\"\n\t\t\t\t:frontPage=\"true\"\n\t\t\t\t:total=\"tableConfig.data.length\"\n\t\t\t\t@page-change=\"pageChange\"\n\t\t\t\tv-if=\"mode === 0\"\n\t\t\t>\n\t\t\t\t<template #buttons>\n\t\t\t\t\t<Button type=\"info\" @click=\"projectVisible = true\">\n\t\t\t\t\t\t<Icon type=\"md-create\" /> 添加入库\n\t\t\t\t\t</Button>\n\t\t\t\t</template>\n\t\t\t\t<template #unit_id=\"{ row }\">\n\t\t\t\t\t{{ getUnitById(row.unit) }}\n\t\t\t\t</template>\n\t\t\t\t<template #pro_status=\"{ row }\">\n\t\t\t\t\t{{ getStatusByCode(row.pro_status) }}\n\t\t\t\t</template>\n\t\t\t\t<template #action=\"{ row }\">\n\t\t\t\t\t<Button type=\"warning\" size=\"small\" @click=\"del(row)\">\n\t\t\t\t\t\t删除 </Button\n\t\t\t\t\t>&nbsp;\n\t\t\t\t\t<Button type=\"success\" size=\"small\" @click=\"toDetail(row)\"\n\t\t\t\t\t\t>详情</Button\n\t\t\t\t\t>\n\t\t\t\t</template>\n\t\t\t</my-table>\n\t\t\t<div class=\"detail\" v-if=\"mode === 1\">\n\t\t\t\t<div class=\"back\">\n\t\t\t\t\t<Button type=\"primary\" @click=\"back\"\n\t\t\t\t\t\t><Icon type=\"md-arrow-round-back\" />返回</Button\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<expand-row :row=\"currentData\" @statusChange=\"statusChange\"></expand-row>\n\t\t\t</div>\n\t\t</Card>\n\t\t<Modal\n\t\t\tv-model=\"projectVisible\"\n\t\t\ttitle=\"添加入库\"\n\t\t\t:mask-closable=\"false\"\n\t\t>\n\t\t\t<Form :model=\"inParam\" :rules=\"inParamRule\" ref=\"inParam\">\n\t\t\t\t<FormItem label=\"项目名称\" prop=\"pro_name\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tv-model=\"inParam.pro_name\"\n\t\t\t\t\t\tplaceholder=\"输入项目名称\"\n\t\t\t\t\t></Input>\n\t\t\t\t</FormItem>\n\t\t\t\t<FormItem label=\"单位\" prop=\"unit_id\">\n\t\t\t\t\t<Select v-model=\"inParam.unit\">\n\t\t\t\t\t\t<Option\n\t\t\t\t\t\t\t:value=\"unit.unit_id\"\n\t\t\t\t\t\t\t:key=\"unit.unit_id\"\n\t\t\t\t\t\t\tv-for=\"unit of unitData\"\n\t\t\t\t\t\t\t>{{ unit.unit_name }}</Option\n\t\t\t\t\t\t>\n\t\t\t\t\t</Select>\n\t\t\t\t</FormItem>\n\t\t\t\t<FormItem label=\"文件路径\" prop=\"data_path\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tv-model=\"inParam.data_path\"\n\t\t\t\t\t\tplaceholder=\"文件夹路径\"\n\t\t\t\t\t\tstyle=\"width: calc(100% - 20px)\"\n\t\t\t\t\t></Input>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ttype=\"md-checkmark-circle\"\n\t\t\t\t\t\tstyle=\"font-size: 18px; color: green\"\n\t\t\t\t\t\tv-if=\"folderSuccess\"\n\t\t\t\t\t/>\n\t\t\t\t</FormItem>\n                <FormItem label=\"任务描述\" prop=\"pro_description\">\n                        <Input\n                            v-model=\"inParam.pro_description\"\n                            placeholder=\"请输入任务描述信息\"\n                            type=\"textarea\"\n                            :rows=\"4\"\n                        ></Input>\n                    </FormItem>\n\t\t\t</Form>\n            <div slot=\"footer\">\n                <Button type=\"default\" @click=\"cancel\">取消</Button>\n                <Button type=\"primary\" @click=\"save\">确定</Button>\n            </div>\n\t\t</Modal>\n\t</div>\n</template>\n<script>\nimport myTable from '@/components/mytable/my-table.vue';\nimport { getProcess, createPro, validatePath, delProcess } from '@/api/collect';\nimport { getUnit } from '@/api/setting';\nimport { projStatus } from './status';\nimport ExpandRow from './expandRow.vue';\nexport default {\n\tcomponents: { myTable, ExpandRow },\n\tname: 'in-task',\n\tdata() {\n\t\tconst validateFolders = (rule, value, callback) => {\n\t\t\tif (!value) {\n\t\t\t\treturn callback(new Error('文件路径不得为空！'));\n\t\t\t}\n\t\t\t// 模拟异步验证效果\n\t\t\t// setTimeout(() => {\n\t\t\t// \tif (value === 'a/b/c') {\n\t\t\t// \t\tcallback();\n\t\t\t// \t\tthis.folderSuccess = true;\n\t\t\t// \t} else {\n\t\t\t// \t\tcallback(new Error('文件路径检测不到！'));\n\t\t\t// \t}\n            // }, 1000);\n            validatePath(value).then(res => {\n                if(!!res){\n                    callback();\n\t\t\t\t\tthis.folderSuccess = true;\n\t\t\t\t} else {\n\t\t\t\t\tcallback(new Error('文件路径不存在！'));\n\t\t\t\t}\n            })\n\t\t};\n\t\treturn {\n\t\t\ttableConfig: {\n\t\t\t\tdata: [],\n\t\t\t\tcolumn: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'pro_name',\n\t\t\t\t\t\ttitle: '任务名称',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'unit_id',\n\t\t\t\t\t\ttitle: '所属单位',\n\t\t\t\t\t\tslot: 'unit_id',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'pro_status',\n\t\t\t\t\t\ttitle: '任务状态',\n\t\t\t\t\t\tslot: 'pro_status',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'data_path',\n\t\t\t\t\t\ttitle: '文件路径',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'pro_description',\n\t\t\t\t\t\ttitle: '任务描述',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: '操作',\n\t\t\t\t\t\tslot: 'action',\n\t\t\t\t\t\tkey: 'action',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttools: [],\n\t\t\t\tpage:1\n\t\t\t},\n\t\t\tprojectVisible: false,\n\t\t\tinParam: {\n\t\t\t\tpro_name: '',\n\t\t\t\tdata_path: '',\n\t\t\t\tunit: null,\n\t\t\t\tpro_description: '',\n\t\t\t},\n\t\t\tinParamRule: {\n\t\t\t\tpro_name: [\n\t\t\t\t\t{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: '请输入项目任务名称',\n\t\t\t\t\t\ttrigger: 'blur',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tdata_path: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalidator: validateFolders,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\ttrigger: 'blur',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tfolderSuccess: false,\n\t\t\tmode: 0,\n\t\t\tcurrentData: {},\n\t\t\tunitData: [],\n\t\t\tprojStatus,\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.getUnit();\n\t\tthis.getProcess();\n\t},\n\tcomputed: {\n\t\tgetUnitById() {\n\t\t\treturn function (id) {\n\t\t\t\treturn this.unitData.find((list) => list.unit_id === id)\n\t\t\t\t\t.unit_name;\n\t\t\t};\n\t\t},\n\t\tgetStatusByCode() {\n\t\t\treturn function (code) {\n\t\t\t\treturn this.projStatus.find((list) => list.code === code)\n\t\t\t\t\t.status;\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\t// 获取所有单位数据\n\t\tgetUnit() {\n\t\t\tgetUnit().then((res) => {\n\t\t\t\tthis.unitData = res;\n\t\t\t});\n\t\t},\n\t\t// 获取所有任务信息\n\t\tgetProcess() {\n\t\t\tgetProcess().then((res) => {\n\t\t\t\tthis.tableConfig.data = res;\n\t\t\t});\n\t\t},\n\t\tdel(row) {\n            let that = this;\n            this.$Modal.confirm({\n                title:'是否删除该条数据',\n                onOk:function(){\n                    delProcess(row.pro_id).then(() => {\n                        that.$Message.success('删除成功');\n                        that.getProcess();\n                    })\n                }\n            })\n\t\t},\n\t\tcancel() {\n\t\t\tthis.projectVisible = false;\n\t\t\tthis.folderSuccess = false;\n\t\t\tthis.resetForm();\n\t\t},\n\t\tresetForm() {\n\t\t\tthis.inParam = {\n\t\t\t\tpro_name: '',\n\t\t\t\tdata_path: '',\n\t\t\t\tunit_id: null,\n\t\t\t\tpro_description: '',\n\t\t\t};\n\t\t},\n\t\ttoDetail(row) {\n\t\t\tthis.currentData = Object.assign(\n\t\t\t\t{},\n\t\t\t\trow,\n\t\t\t\t{ unit_name: this.getUnitById(row.unit) },\n\t\t\t\t{ statusStr: this.getStatusByCode(row.pro_status) }\n\t\t\t);\n\t\t\tthis.mode = 1;\n        },\n        // 校验\n        validatorPath(path){\n            return new Promise(resolve => {\n                validatePath(path).then((res) => {\n                    resolve(res)\n                })\n            })\n        },\n\t\tback() {\n            this.mode = 0;\n            this.getUnit();\n\t\t    this.getProcess();\n\t\t},\n\t\tsave(){\n            this.$refs['inParam'].validate((valid) => {\n                if(valid){\n                    createPro(this.inParam).then(() => {\n                        this.getProcess();\n                        this.projectVisible = false;\n                    })\n                } else {\n                    this.$Message.warning('校验输入有误')\n                }\n            })\n        },\n        statusChange(data){\n            this.currentData = Object.assign(\n\t\t\t\t{},\n                this.currentData,\n                data,\n\t\t\t\t{ unit_name: this.getUnitById(data.unit) },\n\t\t\t\t{ statusStr: this.getStatusByCode(data.pro_status) }\n\t\t\t);\n        },\n\t\tasync pageChange(page) {\n\t\t\tthis.tableConfig.page = page;\n\t\t},\n\t},\n};\n</script>\n<style lang=\"scss\">\n.in_task {\n\theight: calc(100% - 50px);\n\toverflow-y: auto;\n}\n</style>\n"]}]}