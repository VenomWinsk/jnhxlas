{"remainingRequest":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hx_ygg/job/hx_logana3.0/web/src/components/collectTree/collect-tree.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hx_ygg/job/hx_logana3.0/web/src/components/collectTree/collect-tree.vue","mtime":1631238422157},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7CmltcG9ydCB7IGdldENvbGxlY3QsIGFkZENvbGxlY3QsIGRlbENvbGxlY3QsIGVkaXRDb2xsZWN0IH0gZnJvbSAnQC9hcGkvc2VhcmNoJzsKaW1wb3J0IGZvbGRlck9wZW4gZnJvbSAnQC9hc3NldHMvbWFpbi9mb2xkZXItb3Blbi5wbmcnOwppbXBvcnQgZm9sZGVyQ2xvc2UgZnJvbSAnQC9hc3NldHMvbWFpbi9mb2xkZXItY2xvc2UucG5nJzsKaW1wb3J0IHsgc2V0VHJlZUJ5SnNvbiB9IGZyb20gJ0AvdXRpbHMvdXRpbCc7CmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICdjb2xsZWN0LXRyZWUnLAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQljb2xsZWN0VHJlZTogbnVsbCwKCQkJLy8genRyZWUg6YWN572uCgkJCXNldHRpbmc6IHsKCQkJCWRhdGE6IHt9LAoJCQkJY2FsbGJhY2s6IHsKCQkJCQlvblJpZ2h0Q2xpY2s6IHRoaXMubm9kZVJpZ2h0Q2xpY2ssCgkJCQkJb25DbGljazp0aGlzLm5vZGVDbGljawoJCQkJfSwKICAgICAgICAgICAgICAgIGVkaXQ6e30sCgkJCX0sCgkJCS8vIOiKgueCueaVsOaNrgoJCQl6Tm9kZXM6IFtdLAoJCQkvLyDmjqfliLblj7PplK7oj5zljZXlhoXlrrnnmoTmmL7npLrpmpDol48KCQkJck1lbnVDb250ZW50OiB7CgkJCQloYXNDcmVhdGU6IHRydWUsCgkJCQloYXNEZWw6IHRydWUsCgkJCQloYXNSbmFtZTogdHJ1ZSwKCQkJfSwKICAgICAgICAgICAgY3VyTm9kZTpudWxsLAogICAgICAgICAgICB6VHJlZTpudWxsLAoJCQluYW1lOicnLAoJCQlyZW5hbWVWaXNpYmxlOmZhbHNlCgkJfTsKCX0sCglhc3luYyBtb3VudGVkKCkgewoJCXRoaXMuek5vZGVzID0gYXdhaXQgdGhpcy5nZXROb2RlcygpOwoJCSQuZm4uelRyZWUuaW5pdCgkKCcjY29sbGVjdFRyZWUnKSwgdGhpcy5zZXR0aW5nLCB0aGlzLnpOb2Rlcyk7CgkJdGhpcy56VHJlZSA9ICQuZm4uelRyZWUuZ2V0WlRyZWVPYmooJ2NvbGxlY3RUcmVlJyk7CgkJdGhpcy5jdXJOb2RlID0gdGhpcy56VHJlZS5nZXROb2RlcygpWzBdOwoJCXRoaXMuelRyZWUuc2VsZWN0Tm9kZSh0aGlzLmN1ck5vZGUpOwoJCXRoaXMuJGVtaXQoJ25vZGVDbGljaycsdGhpcy5jdXJOb2RlKTsKCQkkKCdib2R5JykuY2xpY2soKCkgPT4gdGhpcy5jbG9zZVJtZW51KCkpOwoJCS8vIHRoaXMuZ2V0Tm9kZXMoKTsKCX0sCgltZXRob2RzOiB7CgkJbm9kZVJpZ2h0Q2xpY2soZXZlbnQsIHRyZWVJZCwgdHJlZU5vZGUpIHsKCQkJaWYgKHRyZWVOb2RlKSB7CgkJCQl0aGlzLmN1ck5vZGUgPSB0cmVlTm9kZTsKCQkJCXRoaXMuelRyZWUuc2VsZWN0Tm9kZSh0cmVlTm9kZSk7CgkJCQl0aGlzLnNob3dSbWVudSh0cmVlTm9kZSwgZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CgkJCX0KCQl9LAoJCW5vZGVDbGljayhldmVudCwgdHJlZUlkLCB0cmVlTm9kZSl7CgkJCXRoaXMuY3VyTm9kZSA9IHRyZWVOb2RlOwoJCQl0aGlzLiRlbWl0KCdub2RlQ2xpY2snLHRoaXMuY3VyTm9kZSk7CgkJfSwKCQkvKioKCQkgKiDlj7PplK7oj5zljZXnmoTlvIDlkK8KCQkgKi8KCQlzaG93Um1lbnUodHJlZU5vZGUsIHgsIHkpIHsKCQkJaWYgKHRoaXMuaXNSb290KHRyZWVOb2RlKSkgewoJCQkJLy8g5aaC5p6c5piv5qC56IqC54K5IOWPquacieaWsOWingoJCQkJdGhpcy5yTWVudUNvbnRlbnQuaGFzRGVsID0gZmFsc2U7CgkJCQl0aGlzLnJNZW51Q29udGVudC5oYXNSbmFtZSA9IGZhbHNlOwoJCQl9IGVsc2UgewoJCQkJLy8g5YWo6YOo6YO95pyJCgkJCQl0aGlzLnJNZW51Q29udGVudC5oYXNEZWwgPSB0cnVlOwoJCQkJdGhpcy5yTWVudUNvbnRlbnQuaGFzUm5hbWUgPSB0cnVlOwoJCQl9CgkJCSQoJyNyTWVudScpLmNzcyh7CgkJCQl0b3A6IHkgKyAncHgnLAoJCQkJbGVmdDogeCArICdweCcsCgkJCQl2aXNpYmlsaXR5OiAndmlzaWJsZScsCgkJCX0pOwoJCX0sCgkJLy8g5Yik5pat5piv5LiN5piv5qC56IqC54K5CgkJaXNSb290KHRyZWVOb2RlKSB7CgkJCXJldHVybiB0cmVlTm9kZS5sZXZlbCA9PT0gMDsKCQl9LAoJCS8qKgoJCSAqIOWPs+mUruiPnOWNleeahOWFs+mXrQoJCSAqIDEu54K55Ye76I+c5Y2V5pe25YCZCgkJICogMi7ngrnlh7vnqbrnmb3lpITnmoTml7blgJkKCQkgKi8KCQljbG9zZVJtZW51KCkgewoJCQkkKCcjck1lbnUnKS5jc3MoeyB2aXNpYmlsaXR5OiAnaGlkZGVuJyB9KTsKCQl9LAoJCS8vIOiOt+WPluiKgueCuQoJCWdldE5vZGVzKCkgewoJCQlyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKCQkJCWdldENvbGxlY3QoKS50aGVuKChyZXMpID0+IHsKCQkJCQlsZXQgZGF0YSA9IHJlcy5maWx0ZXIoKGxpc3QpID0+IGxpc3QubWFya190eXBlID09PSAwKTsKCQkJCQlyZXNvbHZlKHRoaXMuc2V0Tm9kZXMoc2V0VHJlZUJ5SnNvbihkYXRhKSkpOwoJCQkJfSk7CgkJCX0pOwoJCX0sCgkJLy8gbm9kZeiuvue9rgoJCXNldE5vZGVzKG5vZGVzKSB7CgkJCXJldHVybiBub2Rlcy5tYXAoKGxpc3QpID0+IHsKCQkJCWlmIChsaXN0LmNoaWxkcmVuKSB7CgkJCQkJbGlzdC5jaGlsZHJlbiA9IHRoaXMuc2V0Tm9kZXMobGlzdC5jaGlsZHJlbik7CgkJCQl9CgkJCQlyZXR1cm4gewoJCQkJCS4uLmxpc3QsCgkJCQkJbmFtZTogbGlzdC5tYXJrX25hbWUsCgkJCQkJb3BlbjogdHJ1ZSwKCQkJCQlpY29uOiBmb2xkZXJDbG9zZSwKCQkJCQlpY29uT3BlbjogZm9sZGVyT3BlbiwKCQkJCQlpY29uQ2xvc2U6IGZvbGRlckNsb3NlLAoJCQkJfTsKCQkJfSk7CgkJfSwKCQkvLyDmt7vliqDmlofku7blpLkKCQlhZGROb2RlcygpIHsKCQkJLy8g6Kem5Y+RYWRkTm9kZeWHveaVsAoJCQl0aGlzLmFqYXhBZGQobnVsbCwgMCwgJ+aWsOW7uuaWh+S7tuWkuScpOwoJCX0sCiAgICAgICAgZWRpdE5vZGVzKCl7CiAgICAgICAgICAgIHRoaXMucmVuYW1lVmlzaWJsZSA9IHRydWU7CgkJCXRoaXMubmFtZSA9IHRoaXMuY3VyTm9kZS5tYXJrX25hbWU7CiAgICAgICAgfSwKCQlkZWxOb2RlKCl7CgkJCXRoaXMuYWpheERlbGV0ZSh0aGlzLmN1ck5vZGUubWFya19pZCwoKSA9PiB7CgkJCQl0aGlzLnpUcmVlLnJlbW92ZU5vZGUodGhpcy5jdXJOb2RlKTsKCQkJCXRoaXMuY3VyTm9kZSA9IHRoaXMuelRyZWUuZ2V0Tm9kZXMoKVswXTsKCQkJCXRoaXMuelRyZWUuc2VsZWN0Tm9kZSh0aGlzLmN1ck5vZGUpOwoJCQkJdGhpcy4kZW1pdCgnbm9kZUNsaWNrJyx0aGlzLmN1ck5vZGUpOwoJCQl9KTsKCQl9LAoJCWFqYXhBZGQoY29uZGl0aW9ucyxtYXJrX3R5cGUsbWFya19uYW1lLGNhbGxiYWNrKXsKCQkJaWYoIW1hcmtfbmFtZS50cmltKCkpewoJCQkJdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXkuabnrb7lkI3np7AnKTsKCQkJCXJldHVybgoJCQl9CgkJCWxldCBub2RlID0gewoJCQkJbWFya19uYW1lLAoJCQkJbWFya190eXBlLAoJCQkJbWFya19xdHlwZTogbnVsbCwKCQkJCW1hcmtfcGlkOiB0aGlzLmN1ck5vZGUubWFya19pZCwKCQkJCWlzX3Jvb3Q6IDAsCgkJCQltYXJrX2NvbmRhdGlvbnM6IGNvbmRpdGlvbnMsCgkJCX07CgkJCWFkZENvbGxlY3Qobm9kZSkudGhlbigocmVzKSA9PiB7CgkJCQl0aGlzLnpUcmVlLmFkZE5vZGVzKHRoaXMuY3VyTm9kZSwgLTEsIHRoaXMuc2V0Tm9kZShyZXMpKTsKCQkJCWlmKGNhbGxiYWNrKXsKCQkJCQljYWxsYmFjaygpOwoJCQkJfQoJCQl9KQoJCX0sCgkJYWpheEVkaXQoZGF0YSxjdXJOb2RlLG1zZykgewoJCQlyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKCQkJCWVkaXRDb2xsZWN0KGRhdGEsY3VyTm9kZS5tYXJrX2lkKS50aGVuKCgpID0+IHsKCQkJCQl0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MobXNnP21zZzon5L+u5pS55oiQ5YqfJyk7CgkJCQkJcmVzb2x2ZSgpOwoJCQkJfSkKCQkJfSkKCQl9LAoJCWFqYXhEZWxldGUoaWQsY2FsbGJhY2spIHsKCQkJZGVsQ29sbGVjdChpZCkudGhlbigoKSA9PiB7CgkJCQl0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwoJCQkJaWYoY2FsbGJhY2spewoJCQkJCWNhbGxiYWNrKCk7CgkJCQl9CgkJCX0pCgkJfSwKCQkvLyDlpITnkIZub2RlCgkJc2V0Tm9kZShub2RlKXsKCQkJcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sbm9kZSx7CgkJCQluYW1lOiBub2RlLm1hcmtfbmFtZSwKCQkJCW9wZW46IHRydWUsCgkJCQlpY29uOiBmb2xkZXJDbG9zZSwKCQkJCWljb25PcGVuOiBmb2xkZXJPcGVuLAoJCQkJaWNvbkNsb3NlOiBmb2xkZXJDbG9zZSwKCQkJfSkKCQl9LAoJCS8vIOS/ruaUueWQjeensAoJCWNoYW5nZU5hbWUoKXsKCQkJdGhpcy5hamF4RWRpdCh7bWFya19uYW1lOnRoaXMubmFtZX0sdGhpcy5jdXJOb2RlKS50aGVuKCgpID0+IHsKCQkJCXRoaXMuY3VyTm9kZS5tYXJrX25hbWUgPSB0aGlzLm5hbWU7CgkJCQl0aGlzLmN1ck5vZGUubmFtZSA9IHRoaXMubmFtZTsKCQkJCXRoaXMuelRyZWUudXBkYXRlTm9kZSh0aGlzLmN1ck5vZGUpOwoJCQkJdGhpcy5yZW5hbWVWaXNpYmxlID0gZmFsc2U7CgkJCX0pOwoJCX0KCX0sCn07Cg=="},{"version":3,"sources":["collect-tree.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"collect-tree.vue","sourceRoot":"src/components/collectTree","sourcesContent":["<template>\n\t<div class=\"collect_tree\">\n\t\t<ul id=\"collectTree\" class=\"ztree\"></ul>\n\t\t<div id=\"rMenu\">\n\t\t\t<DropdownMenu >\n\t\t\t\t<div @click=\"addNodes()\">\n\t\t\t\t\t<DropdownItem v-if=\"rMenuContent.hasCreate\" disabled>\n\t\t\t\t\t\t新建文件夹\n\t\t\t\t\t</DropdownItem>\n\t\t\t\t</div>\n\t\t\t\t<div @click=\"delNode()\">\n\t\t\t\t\t<DropdownItem v-if=\"rMenuContent.hasDel\" disabled>\n\t\t\t\t\t\t删除文件夹\n\t\t\t\t\t</DropdownItem>\n\t\t\t\t</div>\n\t\t\t\t<div @click=\"editNodes()\">\n\t\t\t\t\t<DropdownItem v-if=\"rMenuContent.hasRname\" disabled>\n\t\t\t\t\t\t修改名称\n\t\t\t\t\t</DropdownItem>\n\t\t\t\t</div>\n\t\t\t</DropdownMenu>\n\t\t</div>\n\t<!-- 修改名称 -->\n\t<Modal\n\t\t\tclass=\"classModal\"\n\t\t\tv-model=\"renameVisible\"\n\t\t\ttitle=\"修改名称\"\n\t\t\twidth=\"500\"\n\t\t\t:mask-closable=\"false\"\n\t\t>\n\t\t\t<div class=\"top\">\n\t\t\t\t<label for=\"name\">名称</label>\n\t\t\t\t<Input\n\t\t\t\t\tv-model=\"name\"\n\t\t\t\t\tplaceholder=\"输入名称\"\n\t\t\t\t\tstyle=\"width: calc(100% - 34px)\"\n\t\t\t\t></Input>\n\t\t\t</div>\n\t\t\t<div slot=\"footer\">\n\t\t\t\t<Button type=\"default\" @click=\"renameVisible = false;\">取消</Button>\n\t\t\t\t<Button type=\"primary\" @click=\"changeName\">确定</Button>\n\t\t\t</div>\n\t</Modal>\n\t</div>\n</template>\n<script>\nimport $ from 'jquery';\nimport { getCollect, addCollect, delCollect, editCollect } from '@/api/search';\nimport folderOpen from '@/assets/main/folder-open.png';\nimport folderClose from '@/assets/main/folder-close.png';\nimport { setTreeByJson } from '@/utils/util';\nexport default {\n\tname: 'collect-tree',\n\tdata() {\n\t\treturn {\n\t\t\tcollectTree: null,\n\t\t\t// ztree 配置\n\t\t\tsetting: {\n\t\t\t\tdata: {},\n\t\t\t\tcallback: {\n\t\t\t\t\tonRightClick: this.nodeRightClick,\n\t\t\t\t\tonClick:this.nodeClick\n\t\t\t\t},\n                edit:{},\n\t\t\t},\n\t\t\t// 节点数据\n\t\t\tzNodes: [],\n\t\t\t// 控制右键菜单内容的显示隐藏\n\t\t\trMenuContent: {\n\t\t\t\thasCreate: true,\n\t\t\t\thasDel: true,\n\t\t\t\thasRname: true,\n\t\t\t},\n            curNode:null,\n            zTree:null,\n\t\t\tname:'',\n\t\t\trenameVisible:false\n\t\t};\n\t},\n\tasync mounted() {\n\t\tthis.zNodes = await this.getNodes();\n\t\t$.fn.zTree.init($('#collectTree'), this.setting, this.zNodes);\n\t\tthis.zTree = $.fn.zTree.getZTreeObj('collectTree');\n\t\tthis.curNode = this.zTree.getNodes()[0];\n\t\tthis.zTree.selectNode(this.curNode);\n\t\tthis.$emit('nodeClick',this.curNode);\n\t\t$('body').click(() => this.closeRmenu());\n\t\t// this.getNodes();\n\t},\n\tmethods: {\n\t\tnodeRightClick(event, treeId, treeNode) {\n\t\t\tif (treeNode) {\n\t\t\t\tthis.curNode = treeNode;\n\t\t\t\tthis.zTree.selectNode(treeNode);\n\t\t\t\tthis.showRmenu(treeNode, event.clientX, event.clientY);\n\t\t\t}\n\t\t},\n\t\tnodeClick(event, treeId, treeNode){\n\t\t\tthis.curNode = treeNode;\n\t\t\tthis.$emit('nodeClick',this.curNode);\n\t\t},\n\t\t/**\n\t\t * 右键菜单的开启\n\t\t */\n\t\tshowRmenu(treeNode, x, y) {\n\t\t\tif (this.isRoot(treeNode)) {\n\t\t\t\t// 如果是根节点 只有新增\n\t\t\t\tthis.rMenuContent.hasDel = false;\n\t\t\t\tthis.rMenuContent.hasRname = false;\n\t\t\t} else {\n\t\t\t\t// 全部都有\n\t\t\t\tthis.rMenuContent.hasDel = true;\n\t\t\t\tthis.rMenuContent.hasRname = true;\n\t\t\t}\n\t\t\t$('#rMenu').css({\n\t\t\t\ttop: y + 'px',\n\t\t\t\tleft: x + 'px',\n\t\t\t\tvisibility: 'visible',\n\t\t\t});\n\t\t},\n\t\t// 判断是不是根节点\n\t\tisRoot(treeNode) {\n\t\t\treturn treeNode.level === 0;\n\t\t},\n\t\t/**\n\t\t * 右键菜单的关闭\n\t\t * 1.点击菜单时候\n\t\t * 2.点击空白处的时候\n\t\t */\n\t\tcloseRmenu() {\n\t\t\t$('#rMenu').css({ visibility: 'hidden' });\n\t\t},\n\t\t// 获取节点\n\t\tgetNodes() {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tgetCollect().then((res) => {\n\t\t\t\t\tlet data = res.filter((list) => list.mark_type === 0);\n\t\t\t\t\tresolve(this.setNodes(setTreeByJson(data)));\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// node设置\n\t\tsetNodes(nodes) {\n\t\t\treturn nodes.map((list) => {\n\t\t\t\tif (list.children) {\n\t\t\t\t\tlist.children = this.setNodes(list.children);\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...list,\n\t\t\t\t\tname: list.mark_name,\n\t\t\t\t\topen: true,\n\t\t\t\t\ticon: folderClose,\n\t\t\t\t\ticonOpen: folderOpen,\n\t\t\t\t\ticonClose: folderClose,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\t// 添加文件夹\n\t\taddNodes() {\n\t\t\t// 触发addNode函数\n\t\t\tthis.ajaxAdd(null, 0, '新建文件夹');\n\t\t},\n        editNodes(){\n            this.renameVisible = true;\n\t\t\tthis.name = this.curNode.mark_name;\n        },\n\t\tdelNode(){\n\t\t\tthis.ajaxDelete(this.curNode.mark_id,() => {\n\t\t\t\tthis.zTree.removeNode(this.curNode);\n\t\t\t\tthis.curNode = this.zTree.getNodes()[0];\n\t\t\t\tthis.zTree.selectNode(this.curNode);\n\t\t\t\tthis.$emit('nodeClick',this.curNode);\n\t\t\t});\n\t\t},\n\t\tajaxAdd(conditions,mark_type,mark_name,callback){\n\t\t\tif(!mark_name.trim()){\n\t\t\t\tthis.$Message.warning('请输入书签名称');\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlet node = {\n\t\t\t\tmark_name,\n\t\t\t\tmark_type,\n\t\t\t\tmark_qtype: null,\n\t\t\t\tmark_pid: this.curNode.mark_id,\n\t\t\t\tis_root: 0,\n\t\t\t\tmark_condations: conditions,\n\t\t\t};\n\t\t\taddCollect(node).then((res) => {\n\t\t\t\tthis.zTree.addNodes(this.curNode, -1, this.setNode(res));\n\t\t\t\tif(callback){\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tajaxEdit(data,curNode,msg) {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\teditCollect(data,curNode.mark_id).then(() => {\n\t\t\t\t\tthis.$Message.success(msg?msg:'修改成功');\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tajaxDelete(id,callback) {\n\t\t\tdelCollect(id).then(() => {\n\t\t\t\tthis.$Message.success('删除成功');\n\t\t\t\tif(callback){\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 处理node\n\t\tsetNode(node){\n\t\t\treturn Object.assign({},node,{\n\t\t\t\tname: node.mark_name,\n\t\t\t\topen: true,\n\t\t\t\ticon: folderClose,\n\t\t\t\ticonOpen: folderOpen,\n\t\t\t\ticonClose: folderClose,\n\t\t\t})\n\t\t},\n\t\t// 修改名称\n\t\tchangeName(){\n\t\t\tthis.ajaxEdit({mark_name:this.name},this.curNode).then(() => {\n\t\t\t\tthis.curNode.mark_name = this.name;\n\t\t\t\tthis.curNode.name = this.name;\n\t\t\t\tthis.zTree.updateNode(this.curNode);\n\t\t\t\tthis.renameVisible = false;\n\t\t\t});\n\t\t}\n\t},\n};\n</script>\n<style lang=\"scss\">\n#rMenu {\n\twidth: 90px;\n\tfont-size: 12px;\n\tposition: fixed;\n\tvisibility: hidden;\n\tul {\n\t\tborder: 1px solid #cfcfcf;\n\t\tbackground-color: #fefefe;\n\t\t.ivu-dropdown-item {\n\t\t\theight: 30px;\n\t\t\tline-height: 30px;\n\t\t\tfont-size: 12px !important;\n\t\t\tfont-weight: 700;\n\t\t\tpadding: 0 5px;\n\t\t\ttext-align: center;\n\t\t\tborder-bottom: 1px solid #cfcfcf;\n\t\t}\n\t\t&:nth-last-child(1) {\n\t\t\tborder-bottom: none;\n\t\t}\n\t}\n    .ivu-dropdown-item-disabled:hover {\n        color: inherit; \n        background-color: #f3f3f3; \n        cursor: pointer;\n    }\n    .ivu-dropdown-item-disabled {\n        color: inherit;\n        cursor: pointer;\n    }\n}\n.node-name input {\n    height: 30px !important;\n}\n</style>\n"]}]}