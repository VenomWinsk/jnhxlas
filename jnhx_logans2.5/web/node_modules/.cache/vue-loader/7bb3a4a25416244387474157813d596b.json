{"remainingRequest":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hx_ygg/job/hx_logana3.0/web/src/views/setting/unit/unit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hx_ygg/job/hx_logana3.0/web/src/views/setting/unit/unit.vue","mtime":1631238422177},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBteVRhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9teXRhYmxlL215LXRhYmxlLnZ1ZSc7CmltcG9ydCB7IGdldFVuaXQsIGFkZFVuaXQsIGVkaXRVbml0LCBkZWxVbml0IH0gZnJvbSAnQC9hcGkvc2V0dGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICd1bml0JywKICAgIGNvbXBvbmVudHM6IHsgbXlUYWJsZSB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0YWJsZUNvbmZpZzogewogICAgICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICAgICAgICBjb2x1bW46IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3VuaXRfbmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5Y2V5L2N5ZCN56ewJywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAndW5pdF9kZXNjcmlwdGlvbicsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5o+P6L+wJywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvdDogJ2FjdGlvbicsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHRvb2xzOiBbXSwKICAgICAgICAgICAgICAgIHBhZ2U6MQogICAgICAgICAgICB9LAogICAgICAgICAgICBtb2RhbEZvcm06IHsKICAgICAgICAgICAgICAgIHVuaXRfbmFtZTogJycsCiAgICAgICAgICAgICAgICB1bml0X2Rlc2NyaXB0aW9uOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBtb2RhbFZpc2libGU6ZmFsc2UsCiAgICAgICAgICAgIG9wdFR5cGU6MCwKICAgICAgICAgICAgY3VycmVudERhdGE6e30KICAgICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRVbml0KCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGdldFVuaXQoKSB7CiAgICAgICAgICAgIGdldFVuaXQoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudGFibGVDb25maWcuZGF0YSA9IHJlczsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvcGVuKHR5cGUsZGF0YSl7CiAgICAgICAgICAgIHRoaXMub3B0VHlwZSA9IHR5cGU7CiAgICAgICAgICAgIHRoaXMubW9kYWxWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgaWYoZGF0YSl7CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhID0gZGF0YTsKICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5tb2RhbEZvcm0sIGtleSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RhbEZvcm1ba2V5XSA9IGRhdGFba2V5XTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNhdmVPckVkaXQoKXsKICAgICAgICAgICAgaWYodGhpcy5vcHRUeXBlID09PSAwKXsKICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5lZGl0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNhdmUoKXsKICAgICAgICAgICAgYWRkVW5pdCh0aGlzLm1vZGFsRm9ybSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKnycpOwogICAgICAgICAgICAgICAgdGhpcy5nZXRVbml0KCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBlZGl0KCl7CiAgICAgICAgICAgIGVkaXRVbml0KHRoaXMubW9kYWxGb3JtLCB0aGlzLmN1cnJlbnREYXRhLnVuaXRfaWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfnvJbovpHmiJDlip8nKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0VW5pdCgpOwogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZGVsKHJvdykgewogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgICAgICAgdGl0bGU6J+aYr+WQpuWIoOmZpOivpeadoeaVsOaNricsCiAgICAgICAgICAgICAgICBvbk9rOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgZGVsVW5pdChyb3cudW5pdF9pZCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJE1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZ2V0VW5pdCgpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBwYWdlQ2hhbmdlKHBhZ2UpIHsKCQkJdGhpcy50YWJsZUNvbmZpZy5wYWdlID0gcGFnZTsKCQl9LAogICAgfSwKfTsK"},{"version":3,"sources":["unit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"unit.vue","sourceRoot":"src/views/setting/unit","sourcesContent":["<template>\n    <div class=\"unit\">\n        <Card>\n            <my-table\n                :column=\"tableConfig.column\"\n                :data=\"tableConfig.data\"\n                :tools=\"tableConfig.tools\"\n                :page=\"tableConfig.page\"\n\t\t\t\t:frontPage=\"true\"\n\t\t\t\t:total=\"tableConfig.data.length\"\n\t\t\t\t@page-change=\"pageChange\"\n            >\n                <template #buttons>\n                    <Button type=\"primary\" @click=\"open(0)\">\n                        <Icon type=\"md-create\" />\n                        新增\n                    </Button>\n                </template>\n                <template #totalPro=\"{ row }\">\n                    <Progress :percent=\"row.totalPro\" :stroke-width=\"5\" />\n                </template>\n                <template #action=\"{ row }\">\n                    <Button type=\"info\" size=\"small\" @click=\"open(1,row)\">编辑</Button>&nbsp;\n                    <Button type=\"warning\" size=\"small\" @click=\"del(row)\">\n                        删除\n                    </Button>\n                </template>\n            </my-table>\n        </Card>\n        <Modal v-model=\"modalVisible\" :title=\"optType?'编辑单位':'新增单位'\" @on-ok=\"saveOrEdit()\" :mask-closable=\"false\">\n            <Form :model=\"modalForm\">\n                <FormItem label=\"单位名称\">\n                    <Input\n                        v-model=\"modalForm.unit_name\"\n                        placeholder=\"输入单位名称\"\n                    ></Input>\n                </FormItem>\n                <FormItem label=\"单位描述\">\n                    <Input\n                        v-model=\"modalForm.unit_description\"\n                        type=\"textarea\"\n                        placeholder=\"单位描述\"\n                    ></Input>\n                </FormItem>\n            </Form>\n        </Modal>\n    </div>\n</template>\n<script>\nimport myTable from '@/components/mytable/my-table.vue';\nimport { getUnit, addUnit, editUnit, delUnit } from '@/api/setting';\nexport default {\n    name: 'unit',\n    components: { myTable },\n    data() {\n        return {\n            tableConfig: {\n                data: [],\n                column: [\n                    {\n                        key: 'unit_name',\n                        title: '单位名称',\n                    },\n                    {\n                        key: 'unit_description',\n                        title: '描述',\n                    },\n                    {\n                        slot: 'action',\n                        title: '操作',\n                    },\n                ],\n                tools: [],\n                page:1\n            },\n            modalForm: {\n                unit_name: '',\n                unit_description: ''\n            },\n            modalVisible:false,\n            optType:0,\n            currentData:{}\n        };\n    },\n    mounted() {\n        this.getUnit();\n    },\n    methods: {\n        getUnit() {\n            getUnit().then((res) => {\n                this.tableConfig.data = res;\n            });\n        },\n        open(type,data){\n            this.optType = type;\n            this.modalVisible = true;\n            if(data){\n                this.currentData = data;\n                for (const key in data) {\n                    if (Object.hasOwnProperty.call(this.modalForm, key)) {\n                        this.modalForm[key] = data[key];\n                    }\n                }\n            }\n        },\n        saveOrEdit(){\n            if(this.optType === 0){\n                this.save();\n            } else {\n                this.edit();\n            }\n        },\n        save(){\n            addUnit(this.modalForm).then(() => {\n                this.$Message.success('添加成功');\n                this.getUnit();\n            })\n        },\n        edit(){\n            editUnit(this.modalForm, this.currentData.unit_id).then(() => {\n                this.$Message.success('编辑成功');\n                this.getUnit();\n            })\n        },\n        del(row) {\n            let that = this;\n            this.$Modal.confirm({\n                title:'是否删除该条数据',\n                onOk:function(){\n                    delUnit(row.unit_id).then(() => {\n                        that.$Message.success('删除成功');\n                        that.getUnit();\n                    })\n                }\n            })\n        },\n        async pageChange(page) {\n\t\t\tthis.tableConfig.page = page;\n\t\t},\n    },\n};\n</script>\n"]}]}