{"remainingRequest":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hx_ygg/job/hx_logana3.0/web/src/views/collect/inTask/expandRow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hx_ygg/job/hx_logana3.0/web/src/views/collect/inTask/expandRow.vue","mtime":1631238422177},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hx_ygg/job/hx_logana3.0/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB0YXNrUGljMSBmcm9tICdAL2Fzc2V0cy9tYWluL3Rhc2sxLnBuZyc7CmltcG9ydCB7IGdldEZvbGRlcnMsIGdldEZpbGVzLCBlZGl0UHJvIH0gZnJvbSAnQC9hcGkvY29sbGVjdCcKaW1wb3J0IHsgZmlsZVN0YXR1cyB9IGZyb20gJy4vc3RhdHVzJwovLyBpbXBvcnQgdGFza1BpYzIgZnJvbSAnQC9hc3NldHMvbWFpbi90YXNrMi5wbmcnOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnZXhwYW5kUm93VGFzaycsCiAgICBwcm9wczogewogICAgICAgIHJvdzoge30sCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTE6ICcxJywKICAgICAgICAgICAgZm9sZGVyczogW10sCiAgICAgICAgICAgIGNvbHVtbjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGtleTogJ2ZpbGVfcGF0aCcsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmlofku7blkI3np7AnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBrZXk6ICdmaWxlX2VuY29kZScsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfnvJbnoIEnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBrZXk6ICdmaWxlX3N0YXR1cycsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfov5DooYznirbmgIEnLAogICAgICAgICAgICAgICAgICAgIHNsb3Q6J2ZpbGVfc3RhdHVzJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8vIHsKICAgICAgICAgICAgICAgIC8vICAgICBrZXk6ICdydWxlR3JvdXAnLAogICAgICAgICAgICAgICAgLy8gICAgIHRpdGxlOiAn5a+55bqU6KeE5YiZ57uEJywKICAgICAgICAgICAgICAgIC8vIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OiAnZGF0YV9sZW5ndGgnLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5oC75p2h5pWwJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OiAncHJvY2Vzc19sZW5ndGgnLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5bey5aSE55CG5p2h5pWwJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OiAnb3V0cHV0X2RhdGEnLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5bey6L6T5Ye65pWw5o2u5p2h5pWwJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgICB0YXNrUGljMSwKICAgICAgICAgICAgZmlsZUxvYWRpbmc6ZmFsc2UsCiAgICAgICAgICAgIGZpbGVTdGF0dXMKICAgICAgICB9OwogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKXsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXRGb2xkZXJzKHRoaXMucm93LnByb19pZCk7CiAgICAgICAgaWYoZGF0YS5sZW5ndGggPiAwKXsKICAgICAgICAgICAgdGhpcy52YWx1ZTEgPSBkYXRhWzBdLmZvbGRlcl9pZCArICcnOwogICAgICAgICAgICB0aGlzLmdldEZpbGVzKGRhdGFbMF0uZm9sZGVyX2lkKTsKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6ewogICAgICAgIGdldFN0YXR1c0J5Q29kZSgpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvZGUpIHsKICAgICAgICAgICAgICAgIGlmKGNvZGUgIT09IG51bGwgJiYgY29kZSAhPT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlU3RhdHVzLmZpbmQobGlzdCA9PiBsaXN0LmNvZGUgPT09IGNvZGUpLnN0YXR1czsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvZGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGJhY2soKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2JhY2snKTsKICAgICAgICB9LAogICAgICAgIGdldEZvbGRlcnMocHJvaklkKXsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBnZXRGb2xkZXJzKHByb2pJZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2xkZXJzID0gcmVzOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldEZpbGVzKGZvbGRlcklkKSB7CiAgICAgICAgICAgIHRoaXMuZmlsZUxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICBnZXRGaWxlcyhmb2xkZXJJZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSByZXM7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBwYW5uZWxDaGFuZ2Uoa2V5KXsKICAgICAgICAgICAgaWYoa2V5WzBdKXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsZXMoa2V5WzBdKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb3B0UHJvKHR5cGUpewogICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlKQogICAgICAgICAgICBsZXQgc3RhdHVzID0gMDsKICAgICAgICAgICAgc3dpdGNoKHR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3BhdXNlJzoKICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAtMTA7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdzdG9wJzoKICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAtMTAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWRpdFBybyh7cHJvX3N0YXR1czpzdGF0dXN9LHRoaXMucm93LnByb19pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICAgdGhpcy4kZW1pdCgnc3RhdHVzQ2hhbmdlJyxyZXMpICAgCiAgICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgIH0sCn07Cg=="},{"version":3,"sources":["expandRow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"expandRow.vue","sourceRoot":"src/views/collect/inTask","sourcesContent":["<template>\n    <div class=\"expandRowTask\">\n        <!-- <div class=\"back\">\n            <Button type=\"primary\" @click=\"back\"\n                ><Icon type=\"md-arrow-round-back\" />返回</Button\n            >\n        </div> -->\n        <div class=\"taskDetail clearfix\">\n            <div class=\"pic fl\">\n                <img :src=\"taskPic1\" width=\"200\" height=\"200\" />\n            </div>\n            <div class=\"fl content\">\n                <Row :gutter=\"16\">\n                    <Col :lg=\"16\" :xl=\"18\" :xxl=\"20\">\n                        <span class=\"taskName\">\n                            <Icon type=\"md-jet\" />\n                            {{ row.pro_name || '-' }}\n                        </span>\n                    </Col>\n                    <Col\n                        :lg=\"8\"\n                        :xl=\"6\"\n                        :xxl=\"4\"\n                        class=\"optMenu\"\n                        v-show=\"row.status !== 100\"\n                    >\n                        <a style=\"color: #f90\" @click=\"optPro('pause')\"><Icon type=\"md-pause\" />暂停</a>\n                        <!-- <a style=\"color: #19be6b\"\n                            ><Icon type=\"md-play\" />继续</a\n                        > -->\n                        <a style=\"color: #ed4014\" @click=\"optPro('stop')\"\n                            ><Icon type=\"ios-square\" />停止</a\n                        >\n                    </Col>\n                </Row>\n                <Row class=\"contentItem\">\n                    <Col :span=\"6\">\n                        <label>任务状态：</label>\n                        <span>\n                            <Badge status=\"warning\" v-if=\"row.pro_status === 0\" />\n                            <Badge color=\"gold\" v-if=\"row.pro_status === -10\" />\n                            <Badge color=\"cyan\" v-if=\"row.pro_status === 1\" />\n                            <Badge status=\"processing\" v-if=\"row.pro_status === 10\"/>\n                            <Badge status=\"error\" v-if=\"row.pro_status === -100\" />\n                            <Badge status=\"success\" v-if=\"row.pro_status === 100\" />\n                            {{ row.statusStr || '-' }}\n                        </span>\n                    </Col>\n                    <Col :span=\"6\">\n                        <label>单位：</label>\n                        <span>{{ row.unit_name || '-' }}</span>\n                    </Col>\n                    <Col :span=\"6\">\n                        <label>开始时间：</label>\n                        <span>{{ row.startTime | dateFormatter(1) }}</span>\n                    </Col>\n                    <Col :span=\"6\">\n                        <label>结束时间：</label>\n                        <span>{{ row.endTime || '-' }}</span>\n                    </Col>\n                    <Col :span=\"6\">\n                        <label>创建人：</label>\n                        <span>{{ row.creator || '-' }}</span>\n                    </Col>\n                    <Col :span=\"6\">\n                        <label>创建时间：</label>\n                        <span>{{ row.create_time | dateFormatter(1) }}</span>\n                    </Col>\n                    <Col :span=\"24\">\n                        <label>任务描述：</label>\n                        <span>{{ row.pro_description || '-' }}</span>\n                    </Col>\n                    <Col :span=\"24\">\n                        <label>任务进度：</label>\n                        <Progress\n                            :percent=\"row.process * 100\"\n                            :stroke-width=\"5\"\n                            style=\"width: 240px\"\n                        />\n                    </Col>\n                </Row>\n            </div>\n        </div>\n        <Collapse v-model=\"value1\" :accordion=\"true\" @on-change=\"pannelChange\">\n            <Panel :name=\"folder.folder_id+''\" v-for=\"(folder,index) in folders\" :key=\"folder.folder_id\">\n                路径{{ index + 1 }}：{{folder.folderpath}}\n                <span\n                    style=\"\n                        width: 400px;\n                        margin-left: 200px;\n                        display: inline-block;\n                    \"\n                >\n                    进度：\n                    <Progress\n                        :percent=\"folder.process * 100\"\n                        :stroke-width=\"5\"\n                        style=\"width: 200px\"\n                    />\n                </span>\n                <div slot=\"content\">\n                    <Table :columns=\"column\" :data=\"data\" size=\"small\" :loading=\"fileLoading\">\n                        <template #file_status=\"{ row }\">\n                            {{ getStatusByCode(row.file_status) }}\n                        </template>\n                    </Table>\n                </div>\n            </Panel>\n        </Collapse>\n    </div>\n</template>\n<script>\nimport taskPic1 from '@/assets/main/task1.png';\nimport { getFolders, getFiles, editPro } from '@/api/collect'\nimport { fileStatus } from './status'\n// import taskPic2 from '@/assets/main/task2.png';\nexport default {\n    name: 'expandRowTask',\n    props: {\n        row: {},\n    },\n    data() {\n        return {\n            value1: '1',\n            folders: [],\n            column: [\n                {\n                    key: 'file_path',\n                    title: '文件名称',\n                },\n                {\n                    key: 'file_encode',\n                    title: '编码',\n                },\n                {\n                    key: 'file_status',\n                    title: '运行状态',\n                    slot:'file_status'\n                },\n                // {\n                //     key: 'ruleGroup',\n                //     title: '对应规则组',\n                // },\n                {\n                    key: 'data_length',\n                    title: '总条数',\n                },\n                {\n                    key: 'process_length',\n                    title: '已处理条数',\n                },\n                {\n                    key: 'output_data',\n                    title: '已输出数据条数',\n                },\n            ],\n            data: [],\n            taskPic1,\n            fileLoading:false,\n            fileStatus\n        };\n    },\n    async mounted(){\n        const data = await this.getFolders(this.row.pro_id);\n        if(data.length > 0){\n            this.value1 = data[0].folder_id + '';\n            this.getFiles(data[0].folder_id);\n        }\n    },\n    computed:{\n        getStatusByCode() {\n            return function(code) {\n                if(code !== null && code !== undefined){\n                    return this.fileStatus.find(list => list.code === code).status;\n                } else {\n                    return code;\n                }\n            }\n        }\n    },\n    methods: {\n        back() {\n            this.$emit('back');\n        },\n        getFolders(projId){\n            return new Promise((resolve) => {\n                getFolders(projId).then((res) => {\n                    this.folders = res;\n                    resolve(res)\n                })\n            })\n        },\n        getFiles(folderId) {\n            this.fileLoading = true;\n            getFiles(folderId).then((res) => {\n                this.data = res;\n                this.fileLoading = false;\n            })\n        },\n        pannelChange(key){\n            if(key[0]){\n                this.getFiles(key[0]);\n            }\n        },\n        optPro(type){\n            console.log(type)\n            let status = 0;\n            switch(type) {\n                case 'pause':\n                    status = -10;\n                    break;\n                case 'stop':\n                    status = -100\n            }\n            editPro({pro_status:status},this.row.pro_id).then(res => {\n                console.log(res)\n             this.$emit('statusChange',res)   \n            })\n        }\n\n    },\n};\n</script>\n<style lang=\"scss\">\n.taskDetail {\n    margin-bottom: 10px;\n    .content {\n        height: 200px;\n        width: calc(100% - 200px);\n        .contentItem {\n            padding: 20px;\n            background-color: #e3e5e8;\n            & > div > label {\n                color: #666;\n                font-size: 14px;\n                margin-right: 10px;\n            }\n            & > div > span {\n                color: #000;\n                display: inline-block;\n                font-size: 14px;\n            }\n            & > div > span:not(.taskName) {\n                color: #000;\n                display: inline-block;\n            }\n        }\n        .taskName {\n            font-size: 24px;\n            display: inline-block;\n            margin-bottom: 8px;\n        }\n        .optMenu a {\n            margin: 0 5px;\n            line-height: 40px;\n        }\n    }\n}\n.expandRowTask {\n    position: relative;\n    .back {\n        position: absolute;\n        top: 5px;\n        left: 5px;\n    }\n}\n</style>\n"]}]}